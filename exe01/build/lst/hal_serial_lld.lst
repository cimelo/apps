   1               		.file	"hal_serial_lld.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.file 1 "../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c"
  11               		.section	.text.notify1,"ax",@progbits
  13               	notify1:
  14               	.LVL0:
  15               	.LFB147:
   1:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*
   2:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
   4:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     you may not use this file except in compliance with the License.
   6:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     You may obtain a copy of the License at
   7:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
   8:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****         http://www.apache.org/licenses/LICENSE-2.0
   9:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  10:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     Unless required by applicable law or agreed to in writing, software
  11:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     See the License for the specific language governing permissions and
  14:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     limitations under the License.
  15:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** */
  16:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  17:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
  18:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @file    USARTv1/hal_serial_lld.c
  19:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   AVR/MEGA SERIAL subsystem low level driver code.
  20:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
  21:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @addtogroup SERIAL
  22:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @{
  23:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
  24:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  25:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #include "hal.h"
  26:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  27:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if HAL_USE_SERIAL || defined(__DOXYGEN__)
  28:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  29:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  30:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /* Driver exported variables.                                               */
  31:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  32:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  33:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
  34:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART0 serial driver identifier.
  35:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @note    The name does not follow the convention used in the other ports
  36:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *          (COMn) because a name conflict with the AVR headers.
  37:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
  38:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0 || defined(__DOXYGEN__)
  39:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** SerialDriver SD1;
  40:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  41:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   /* USARTs are not consistently named across the AVR range. */
  42:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #ifdef USART0_RX_vect
  43:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_RX_VECT USART0_RX_vect
  44:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_TX_VECT USART0_UDRE_vect
  45:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #elif defined(USART_RX_vect)
  46:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_RX_VECT USART_RX_vect
  47:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_TX_VECT USART_UDRE_vect
  48:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #elif defined(USART0_RXC_vect)
  49:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_RX_VECT USART0_RXC_vect
  50:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD1_TX_VECT USART0_UDRE_vect
  51:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #else
  52:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #error "Cannot find USART to use for SD1"
  53:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #endif
  54:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif /* AVR_SERIAL_USE_USART0 */
  55:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  56:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
  57:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART1 serial driver identifier.
  58:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @note    The name does not follow the convention used in the other ports
  59:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *          (COMn) because a name conflict with the AVR headers.
  60:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
  61:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1 || defined(__DOXYGEN__)
  62:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** SerialDriver SD2;
  63:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  64:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   /* Check if USART1 exists for this MCU. */
  65:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #ifdef USART1_RX_vect
  66:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD2_RX_VECT USART1_RX_vect
  67:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD2_TX_VECT USART1_UDRE_vect
  68:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #elif defined (USART1_RXC_vect)
  69:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD2_RX_VECT USART1_RXC_vect
  70:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #define AVR_SD2_TX_VECT USART1_UDRE_vect
  71:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #else
  72:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     #error "Cannot find USART to use for SD2"
  73:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   #endif
  74:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif /* AVR_SERIAL_USE_USART1 */
  75:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  76:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  77:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /* Driver local variables and types.                                        */
  78:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  79:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  80:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
  81:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   Driver default configuration.
  82:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
  83:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static const SerialConfig default_config = {
  84:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR2x_F(SERIAL_DEFAULT_BITRATE),
  85:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   USART_CHAR_SIZE_8
  86:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** };
  87:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  88:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  89:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /* Driver local functions.                                                  */
  90:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
  91:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  92:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void set_error(uint8_t sra, SerialDriver *sdp) {
  93:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   eventflags_t sts = 0;
  94:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t dor = 0;
  95:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t upe = 0;
  96:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t fe = 0;
  97:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
  98:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0
  99:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD1 == sdp) {
 100:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     dor = (1 << DOR0);
 101:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     upe = (1 << UPE0);
 102:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     fe = (1 << FE0);
 103:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 104:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 105:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 106:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1
 107:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD2 == sdp) {
 108:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     dor = (1 << DOR1);
 109:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     upe = (1 << UPE1);
 110:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     fe = (1 << FE1);
 111:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 112:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 113:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 114:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & dor)
 115:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_OVERRUN_ERROR;
 116:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & upe)
 117:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_PARITY_ERROR;
 118:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & fe)
 119:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_FRAMING_ERROR;
 120:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 121:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   chnAddFlagsI(sdp, sts);
 122:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 123:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 124:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 125:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0 || defined(__DOXYGEN__)
 126:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void notify1(io_queue_t *qp) {
  16               		.loc 1 126 37 view -0
  17               		.cfi_startproc
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
 127:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 128:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   (void)qp;
  22               		.loc 1 128 3 view .LVU1
 129:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B |= (1 << UDRIE0);
  23               		.loc 1 129 3 view .LVU2
  24 0000 E1EC      		ldi r30,lo8(-63)
  25 0002 F0E0      		ldi r31,0
  26 0004 8081      		ld r24,Z
  27               	.LVL1:
  28               		.loc 1 129 10 is_stmt 0 view .LVU3
  29 0006 8062      		ori r24,lo8(32)
  30 0008 8083      		st Z,r24
  31               	/* epilogue start */
 130:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
  32               		.loc 1 130 1 view .LVU4
  33 000a 0895      		ret
  34               		.cfi_endproc
  35               	.LFE147:
  37               		.section	.text.__vector_18,"ax",@progbits
  38               	.global	__vector_18
  40               	__vector_18:
  41               	.LFB150:
 131:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 132:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 133:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART0 initialization.
 134:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 135:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @param[in] config    the architecture-dependent serial driver configuration
 136:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 137:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void usart0_init(const SerialConfig *config) {
 138:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 139:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t ucsr0c;
 140:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 141:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0L = config->sc_brr;
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0H = (config->sc_brr >> 8) & 0x0f;
 143:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 144:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = (1 << RXEN0) | (1 << TXEN0) | (1 << RXCIE0);
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 146:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 147:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = 0;
 148:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 149:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_6:
 150:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ00);
 151:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 152:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_7:
 153:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ01);
 154:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 155:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_9:
 156:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR0B |= (1 << UCSZ02);
 157:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ00) | (1 << UCSZ01);
 158:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 159:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_8:
 160:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   default:
 161:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ00) | (1 << UCSZ01);
 162:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 163:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 164:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 165:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0C = (1 << URSEL0) | ucsr0c;
 166:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #else
 167:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0C = ucsr0c;
 168:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 169:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 170:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 171:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 172:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART0 de-initialization.
 173:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 174:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void usart0_deinit(void) {
 175:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 176:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = 0;
 177:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = 0;
 178:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 179:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0C = (1 << URSEL0);
 180:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #else
 181:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0C = 0;
 182:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 183:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 184:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 185:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 186:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1 || defined(__DOXYGEN__)
 187:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void notify2(io_queue_t *qp) {
 188:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 189:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   (void)qp;
 190:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1B |= (1 << UDRIE1);
 191:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 192:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 193:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 194:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART1 initialization.
 195:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 196:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @param[in] config    the architecture-dependent serial driver configuration
 197:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 198:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void usart1_init(const SerialConfig *config) {
 199:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 200:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t ucsr1c;
 201:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 202:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR1L = config->sc_brr;
 203:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR1H = (config->sc_brr >> 8) & 0x0f;
 204:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1A = (1 << U2X0);
 205:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1B = (1 << RXEN1) | (1 << TXEN1) | (1 << RXCIE1);
 206:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 207:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 208:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   ucsr1c = 0;
 209:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 210:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_6:
 211:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr1c = (1 << UCSZ10);
 212:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 213:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_7:
 214:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr1c = (1 << UCSZ11);
 215:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 216:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_9:
 217:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR1B |= (1 << UCSZ12);
 218:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr1c = (1 << UCSZ10) | (1 << UCSZ11);
 219:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 220:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_8:
 221:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   default:
 222:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr1c = (1 << UCSZ10) | (1 << UCSZ11);
 223:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 224:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 225:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 226:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1C = (1 << URSEL1) | ucsr1c;
 227:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #else
 228:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1C = ucsr1c;
 229:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 230:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 231:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 232:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 233:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART1 de-initialization.
 234:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 235:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** static void usart1_deinit(void) {
 236:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 237:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1A = 0;
 238:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1B = 0;
 239:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 240:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1C = (1 << URSEL1);
 241:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #else
 242:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR1C = 0;
 243:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 244:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 245:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 246:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 247:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
 248:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /* Driver interrupt handlers.                                               */
 249:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
 250:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 251:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0 || defined(__DOXYGEN__)
 252:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 253:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART0 RX interrupt handler.
 254:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 255:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @isr
 256:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 257:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** OSAL_IRQ_HANDLER(AVR_SD1_RX_VECT) {
  42               		.loc 1 257 35 is_stmt 1 view -0
  43               		.cfi_startproc
  44 0000 1F92      		push r1
  45               	.LCFI0:
  46               		.cfi_def_cfa_offset 3
  47               		.cfi_offset 1, -2
  48 0002 0F92      		push r0
  49               	.LCFI1:
  50               		.cfi_def_cfa_offset 4
  51               		.cfi_offset 0, -3
  52 0004 0FB6      		in r0,__SREG__
  53 0006 0F92      		push r0
  54 0008 1124      		clr __zero_reg__
  55 000a 2F93      		push r18
  56               	.LCFI2:
  57               		.cfi_def_cfa_offset 5
  58               		.cfi_offset 18, -4
  59 000c 3F93      		push r19
  60               	.LCFI3:
  61               		.cfi_def_cfa_offset 6
  62               		.cfi_offset 19, -5
  63 000e 4F93      		push r20
  64               	.LCFI4:
  65               		.cfi_def_cfa_offset 7
  66               		.cfi_offset 20, -6
  67 0010 5F93      		push r21
  68               	.LCFI5:
  69               		.cfi_def_cfa_offset 8
  70               		.cfi_offset 21, -7
  71 0012 6F93      		push r22
  72               	.LCFI6:
  73               		.cfi_def_cfa_offset 9
  74               		.cfi_offset 22, -8
  75 0014 7F93      		push r23
  76               	.LCFI7:
  77               		.cfi_def_cfa_offset 10
  78               		.cfi_offset 23, -9
  79 0016 8F93      		push r24
  80               	.LCFI8:
  81               		.cfi_def_cfa_offset 11
  82               		.cfi_offset 24, -10
  83 0018 9F93      		push r25
  84               	.LCFI9:
  85               		.cfi_def_cfa_offset 12
  86               		.cfi_offset 25, -11
  87 001a AF93      		push r26
  88               	.LCFI10:
  89               		.cfi_def_cfa_offset 13
  90               		.cfi_offset 26, -12
  91 001c BF93      		push r27
  92               	.LCFI11:
  93               		.cfi_def_cfa_offset 14
  94               		.cfi_offset 27, -13
  95 001e EF93      		push r30
  96               	.LCFI12:
  97               		.cfi_def_cfa_offset 15
  98               		.cfi_offset 30, -14
  99 0020 FF93      		push r31
 100               	.LCFI13:
 101               		.cfi_def_cfa_offset 16
 102               		.cfi_offset 31, -15
 103               	/* prologue: Signal */
 104               	/* frame size = 0 */
 105               	/* stack size = 15 */
 106               	.L__stack_usage = 15
 258:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t sra;
 107               		.loc 1 258 3 view .LVU6
 259:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 260:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_PROLOGUE();
 108               		.loc 1 260 3 view .LVU7
 109               		.loc 1 260 3 view .LVU8
 110 0022 81E0      		ldi r24,lo8(1)
 111 0024 8093 0000 		sts __avr_in_isr,r24
 112               		.loc 1 260 3 view .LVU9
 113               		.loc 1 260 22 view .LVU10
 261:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 262:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sra = UCSR0A;
 114               		.loc 1 262 3 view .LVU11
 115               		.loc 1 262 7 is_stmt 0 view .LVU12
 116 0028 8091 C000 		lds r24,192
 117               	.LVL2:
 263:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & ((1 << DOR0) | (1 << UPE0) | (1 << FE0)))
 118               		.loc 1 263 3 is_stmt 1 view .LVU13
 119               		.loc 1 263 6 is_stmt 0 view .LVU14
 120 002c 982F      		mov r25,r24
 121 002e 9C71      		andi r25,lo8(28)
 122 0030 9111      		cpse r25,__zero_reg__
 123 0032 00C0      		rjmp .L16
 124               	.LVL3:
 125               	.L4:
 264:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     set_error(sra, &SD1);
 265:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 126               		.loc 1 265 3 is_stmt 1 view .LVU15
 266:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sdIncomingDataI(&SD1, UDR0);
 127               		.loc 1 266 3 view .LVU16
 128 0034 6091 C600 		lds r22,198
 129 0038 80E0      		ldi r24,lo8(SD1)
 130 003a 90E0      		ldi r25,hi8(SD1)
 131 003c 0E94 0000 		call sdIncomingDataI
 132               	.LVL4:
 267:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 133               		.loc 1 267 3 view .LVU17
 268:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 269:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_EPILOGUE();
 134               		.loc 1 269 3 view .LVU18
 135               		.loc 1 269 3 view .LVU19
 136 0040 1092 0000 		sts __avr_in_isr,__zero_reg__
 137               		.loc 1 269 3 view .LVU20
 138               		.loc 1 269 3 view .LVU21
 139 0044 0E94 0000 		call chSchIsPreemptionRequired
 140               	.LVL5:
 141               		.loc 1 269 3 is_stmt 0 discriminator 1 view .LVU22
 142 0048 8115      		cp r24, __zero_reg__
 143 004a 01F4      		brne .L17
 144               	.L3:
 145               	/* epilogue start */
 270:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 146               		.loc 1 270 1 view .LVU23
 147 004c FF91      		pop r31
 148 004e EF91      		pop r30
 149 0050 BF91      		pop r27
 150 0052 AF91      		pop r26
 151 0054 9F91      		pop r25
 152 0056 8F91      		pop r24
 153 0058 7F91      		pop r23
 154 005a 6F91      		pop r22
 155 005c 5F91      		pop r21
 156 005e 4F91      		pop r20
 157 0060 3F91      		pop r19
 158 0062 2F91      		pop r18
 159 0064 0F90      		pop r0
 160 0066 0FBE      		out __SREG__,r0
 161 0068 0F90      		pop r0
 162 006a 1F90      		pop r1
 163 006c 1895      		reti
 164               	.LVL6:
 165               	.L16:
 264:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 166               		.loc 1 264 5 is_stmt 1 view .LVU24
 167               	.LBB28:
 168               	.LBI28:
  92:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   eventflags_t sts = 0;
 169               		.loc 1 92 13 view .LVU25
 170               	.LBB29:
  93:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t dor = 0;
 171               		.loc 1 93 3 view .LVU26
  94:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t upe = 0;
 172               		.loc 1 94 3 view .LVU27
  95:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t fe = 0;
 173               		.loc 1 95 3 view .LVU28
  96:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 174               		.loc 1 96 3 view .LVU29
  99:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     dor = (1 << DOR0);
 175               		.loc 1 99 3 view .LVU30
 100:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     upe = (1 << UPE0);
 176               		.loc 1 100 5 view .LVU31
 101:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     fe = (1 << FE0);
 177               		.loc 1 101 5 view .LVU32
 102:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 178               		.loc 1 102 5 view .LVU33
 114:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_OVERRUN_ERROR;
 179               		.loc 1 114 3 view .LVU34
 115:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & upe)
 180               		.loc 1 115 5 view .LVU35
 116:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_PARITY_ERROR;
 181               		.loc 1 116 3 view .LVU36
 116:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_PARITY_ERROR;
 182               		.loc 1 116 6 is_stmt 0 view .LVU37
 183 006e 82FB      		bst r24,2
 184 0070 6627      		clr r22
 185 0072 65F9      		bld r22,5
 186               	.LVL7:
 118:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_FRAMING_ERROR;
 187               		.loc 1 118 3 is_stmt 1 view .LVU38
 118:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     sts |= SD_FRAMING_ERROR;
 188               		.loc 1 118 6 is_stmt 0 view .LVU39
 189 0074 84FD      		sbrc r24,4
 119:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 190               		.loc 1 119 5 is_stmt 1 view .LVU40
 119:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 191               		.loc 1 119 9 is_stmt 0 view .LVU41
 192 0076 6064      		ori r22,lo8(64)
 193               	.LVL8:
 194               	.L5:
 120:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   chnAddFlagsI(sdp, sts);
 195               		.loc 1 120 3 is_stmt 1 view .LVU42
 121:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 196               		.loc 1 121 3 view .LVU43
 197               	.LBB30:
 198               	.LBI30:
 199               		.file 2 "../../os/hal/osal/rt-nil/osal.h"
   1:../../os/hal/osal/rt-nil/osal.h **** /*
   2:../../os/hal/osal/rt-nil/osal.h ****     ChibiOS - Copyright (C) 2006..2018 Giovanni Di Sirio
   3:../../os/hal/osal/rt-nil/osal.h **** 
   4:../../os/hal/osal/rt-nil/osal.h ****     Licensed under the Apache License, Version 2.0 (the "License");
   5:../../os/hal/osal/rt-nil/osal.h ****     you may not use this file except in compliance with the License.
   6:../../os/hal/osal/rt-nil/osal.h ****     You may obtain a copy of the License at
   7:../../os/hal/osal/rt-nil/osal.h **** 
   8:../../os/hal/osal/rt-nil/osal.h ****         http://www.apache.org/licenses/LICENSE-2.0
   9:../../os/hal/osal/rt-nil/osal.h **** 
  10:../../os/hal/osal/rt-nil/osal.h ****     Unless required by applicable law or agreed to in writing, software
  11:../../os/hal/osal/rt-nil/osal.h ****     distributed under the License is distributed on an "AS IS" BASIS,
  12:../../os/hal/osal/rt-nil/osal.h ****     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  13:../../os/hal/osal/rt-nil/osal.h ****     See the License for the specific language governing permissions and
  14:../../os/hal/osal/rt-nil/osal.h ****     limitations under the License.
  15:../../os/hal/osal/rt-nil/osal.h **** */
  16:../../os/hal/osal/rt-nil/osal.h **** 
  17:../../os/hal/osal/rt-nil/osal.h **** /**
  18:../../os/hal/osal/rt-nil/osal.h ****  * @file    osal.h
  19:../../os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module header.
  20:../../os/hal/osal/rt-nil/osal.h ****  *
  21:../../os/hal/osal/rt-nil/osal.h ****  * @addtogroup OSAL
  22:../../os/hal/osal/rt-nil/osal.h ****  * @{
  23:../../os/hal/osal/rt-nil/osal.h ****  */
  24:../../os/hal/osal/rt-nil/osal.h **** 
  25:../../os/hal/osal/rt-nil/osal.h **** #ifndef OSAL_H
  26:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_H
  27:../../os/hal/osal/rt-nil/osal.h **** 
  28:../../os/hal/osal/rt-nil/osal.h **** #include <stddef.h>
  29:../../os/hal/osal/rt-nil/osal.h **** #include <stdint.h>
  30:../../os/hal/osal/rt-nil/osal.h **** #include <stdbool.h>
  31:../../os/hal/osal/rt-nil/osal.h **** 
  32:../../os/hal/osal/rt-nil/osal.h **** #include "ch.h"
  33:../../os/hal/osal/rt-nil/osal.h **** 
  34:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  35:../../os/hal/osal/rt-nil/osal.h **** /* Module constants.                                                         */
  36:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
  37:../../os/hal/osal/rt-nil/osal.h **** 
  38:../../os/hal/osal/rt-nil/osal.h **** /**
  39:../../os/hal/osal/rt-nil/osal.h ****  * @name    Common constants
  40:../../os/hal/osal/rt-nil/osal.h ****  * @{
  41:../../os/hal/osal/rt-nil/osal.h ****  */
  42:../../os/hal/osal/rt-nil/osal.h **** #if !defined(FALSE) || defined(__DOXYGEN__)
  43:../../os/hal/osal/rt-nil/osal.h **** #define FALSE                               0
  44:../../os/hal/osal/rt-nil/osal.h **** #endif
  45:../../os/hal/osal/rt-nil/osal.h **** 
  46:../../os/hal/osal/rt-nil/osal.h **** #if !defined(TRUE) || defined(__DOXYGEN__)
  47:../../os/hal/osal/rt-nil/osal.h **** #define TRUE                                1
  48:../../os/hal/osal/rt-nil/osal.h **** #endif
  49:../../os/hal/osal/rt-nil/osal.h **** 
  50:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_SUCCESS                        false
  51:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_FAILED                         true
  52:../../os/hal/osal/rt-nil/osal.h **** /** @} */
  53:../../os/hal/osal/rt-nil/osal.h **** 
  54:../../os/hal/osal/rt-nil/osal.h **** #if 0
  55:../../os/hal/osal/rt-nil/osal.h **** /**
  56:../../os/hal/osal/rt-nil/osal.h ****  * @name    Messages
  57:../../os/hal/osal/rt-nil/osal.h ****  * @{
  58:../../os/hal/osal/rt-nil/osal.h ****  */
  59:../../os/hal/osal/rt-nil/osal.h **** #define MSG_OK                              (msg_t)0
  60:../../os/hal/osal/rt-nil/osal.h **** #define MSG_TIMEOUT                         (msg_t)-1
  61:../../os/hal/osal/rt-nil/osal.h **** #define MSG_RESET                           (msg_t)-2
  62:../../os/hal/osal/rt-nil/osal.h **** /** @} */
  63:../../os/hal/osal/rt-nil/osal.h **** #endif
  64:../../os/hal/osal/rt-nil/osal.h **** 
  65:../../os/hal/osal/rt-nil/osal.h **** #if 0
  66:../../os/hal/osal/rt-nil/osal.h **** /**
  67:../../os/hal/osal/rt-nil/osal.h ****  * @name    Special time constants
  68:../../os/hal/osal/rt-nil/osal.h ****  * @{
  69:../../os/hal/osal/rt-nil/osal.h ****  */
  70:../../os/hal/osal/rt-nil/osal.h **** #define TIME_IMMEDIATE                      ((sysinterval_t)0)
  71:../../os/hal/osal/rt-nil/osal.h **** #define TIME_INFINITE                       ((sysinterval_t)-1)
  72:../../os/hal/osal/rt-nil/osal.h **** /** @} */
  73:../../os/hal/osal/rt-nil/osal.h **** #endif
  74:../../os/hal/osal/rt-nil/osal.h **** 
  75:../../os/hal/osal/rt-nil/osal.h **** /**
  76:../../os/hal/osal/rt-nil/osal.h ****  * @name    Systick modes.
  77:../../os/hal/osal/rt-nil/osal.h ****  * @{
  78:../../os/hal/osal/rt-nil/osal.h ****  */
  79:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_NONE                   0
  80:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_PERIODIC               1
  81:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE_FREERUNNING            2
  82:../../os/hal/osal/rt-nil/osal.h **** /** @} */
  83:../../os/hal/osal/rt-nil/osal.h **** 
  84:../../os/hal/osal/rt-nil/osal.h **** /**
  85:../../os/hal/osal/rt-nil/osal.h ****  * @name    Systick parameters.
  86:../../os/hal/osal/rt-nil/osal.h ****  * @{
  87:../../os/hal/osal/rt-nil/osal.h ****  */
  88:../../os/hal/osal/rt-nil/osal.h **** /**
  89:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Size in bits of the @p systick_t type.
  90:../../os/hal/osal/rt-nil/osal.h ****  */
  91:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_RESOLUTION                  CH_CFG_ST_RESOLUTION
  92:../../os/hal/osal/rt-nil/osal.h **** 
  93:../../os/hal/osal/rt-nil/osal.h **** /**
  94:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Required systick frequency or resolution.
  95:../../os/hal/osal/rt-nil/osal.h ****  */
  96:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_FREQUENCY                   CH_CFG_ST_FREQUENCY
  97:../../os/hal/osal/rt-nil/osal.h **** 
  98:../../os/hal/osal/rt-nil/osal.h **** /**
  99:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Systick mode required by the underlying OS.
 100:../../os/hal/osal/rt-nil/osal.h ****  */
 101:../../os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_ST_TIMEDELTA == 0) || defined(__DOXYGEN__)
 102:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_PERIODIC
 103:../../os/hal/osal/rt-nil/osal.h **** #else
 104:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_ST_MODE                        OSAL_ST_MODE_FREERUNNING
 105:../../os/hal/osal/rt-nil/osal.h **** #endif
 106:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 107:../../os/hal/osal/rt-nil/osal.h **** 
 108:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 109:../../os/hal/osal/rt-nil/osal.h **** /* Module pre-compile time settings.                                         */
 110:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 111:../../os/hal/osal/rt-nil/osal.h **** 
 112:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 113:../../os/hal/osal/rt-nil/osal.h **** /* Derived constants and error checks.                                       */
 114:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 115:../../os/hal/osal/rt-nil/osal.h **** 
 116:../../os/hal/osal/rt-nil/osal.h **** #if !(OSAL_ST_MODE == OSAL_ST_MODE_NONE) &&                                 \
 117:../../os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_PERIODIC) &&                             \
 118:../../os/hal/osal/rt-nil/osal.h ****     !(OSAL_ST_MODE == OSAL_ST_MODE_FREERUNNING)
 119:../../os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_MODE setting in osal.h"
 120:../../os/hal/osal/rt-nil/osal.h **** #endif
 121:../../os/hal/osal/rt-nil/osal.h **** 
 122:../../os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_RESOLUTION != 16) && (OSAL_ST_RESOLUTION != 32) &&             \
 123:../../os/hal/osal/rt-nil/osal.h ****     (OSAL_ST_RESOLUTION != 64)
 124:../../os/hal/osal/rt-nil/osal.h **** #error "invalid OSAL_ST_RESOLUTION, must be 16, 32 or 64"
 125:../../os/hal/osal/rt-nil/osal.h **** #endif
 126:../../os/hal/osal/rt-nil/osal.h **** 
 127:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 128:../../os/hal/osal/rt-nil/osal.h **** /* Module data structures and types.                                         */
 129:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 130:../../os/hal/osal/rt-nil/osal.h **** 
 131:../../os/hal/osal/rt-nil/osal.h **** #if 0
 132:../../os/hal/osal/rt-nil/osal.h **** /**
 133:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a system status word.
 134:../../os/hal/osal/rt-nil/osal.h ****  */
 135:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t syssts_t;
 136:../../os/hal/osal/rt-nil/osal.h **** #endif
 137:../../os/hal/osal/rt-nil/osal.h **** 
 138:../../os/hal/osal/rt-nil/osal.h **** #if 0
 139:../../os/hal/osal/rt-nil/osal.h **** /**
 140:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a message.
 141:../../os/hal/osal/rt-nil/osal.h ****  */
 142:../../os/hal/osal/rt-nil/osal.h **** typedef int32_t msg_t;
 143:../../os/hal/osal/rt-nil/osal.h **** #endif
 144:../../os/hal/osal/rt-nil/osal.h **** 
 145:../../os/hal/osal/rt-nil/osal.h **** #if 0
 146:../../os/hal/osal/rt-nil/osal.h **** /**
 147:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time counter.
 148:../../os/hal/osal/rt-nil/osal.h ****  */
 149:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t systime_t;
 150:../../os/hal/osal/rt-nil/osal.h **** #endif
 151:../../os/hal/osal/rt-nil/osal.h **** 
 152:../../os/hal/osal/rt-nil/osal.h **** #if 0
 153:../../os/hal/osal/rt-nil/osal.h **** /**
 154:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of system time interval.
 155:../../os/hal/osal/rt-nil/osal.h ****  */
 156:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t sysinterval_t;
 157:../../os/hal/osal/rt-nil/osal.h **** #endif
 158:../../os/hal/osal/rt-nil/osal.h **** 
 159:../../os/hal/osal/rt-nil/osal.h **** #if 0
 160:../../os/hal/osal/rt-nil/osal.h **** /**
 161:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of time conversion variable.
 162:../../os/hal/osal/rt-nil/osal.h ****  * @note    This type must have double width than other time types, it is
 163:../../os/hal/osal/rt-nil/osal.h ****  *          only used internally for conversions.
 164:../../os/hal/osal/rt-nil/osal.h ****  */
 165:../../os/hal/osal/rt-nil/osal.h **** typedef uint64_t time_conv_t;
 166:../../os/hal/osal/rt-nil/osal.h **** #endif
 167:../../os/hal/osal/rt-nil/osal.h **** 
 168:../../os/hal/osal/rt-nil/osal.h **** #if 0
 169:../../os/hal/osal/rt-nil/osal.h **** /**
 170:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of realtime counter.
 171:../../os/hal/osal/rt-nil/osal.h ****  */
 172:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t rtcnt_t;
 173:../../os/hal/osal/rt-nil/osal.h **** #endif
 174:../../os/hal/osal/rt-nil/osal.h **** 
 175:../../os/hal/osal/rt-nil/osal.h **** #if 0
 176:../../os/hal/osal/rt-nil/osal.h **** /**
 177:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread reference.
 178:../../os/hal/osal/rt-nil/osal.h ****  */
 179:../../os/hal/osal/rt-nil/osal.h **** typedef thread_t * thread_reference_t;
 180:../../os/hal/osal/rt-nil/osal.h **** #endif
 181:../../os/hal/osal/rt-nil/osal.h **** 
 182:../../os/hal/osal/rt-nil/osal.h **** #if 0
 183:../../os/hal/osal/rt-nil/osal.h **** /**
 184:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags mask.
 185:../../os/hal/osal/rt-nil/osal.h ****  */
 186:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t eventflags_t;
 187:../../os/hal/osal/rt-nil/osal.h **** #endif
 188:../../os/hal/osal/rt-nil/osal.h **** 
 189:../../os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_USE_EVENTS == FALSE) || defined(__DOXYGEN__)
 190:../../os/hal/osal/rt-nil/osal.h **** /**
 191:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event flags object.
 192:../../os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 193:../../os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 194:../../os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 195:../../os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 196:../../os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 197:../../os/hal/osal/rt-nil/osal.h ****  */
 198:../../os/hal/osal/rt-nil/osal.h **** typedef struct event_source event_source_t;
 199:../../os/hal/osal/rt-nil/osal.h **** 
 200:../../os/hal/osal/rt-nil/osal.h **** /**
 201:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of an event source callback.
 202:../../os/hal/osal/rt-nil/osal.h ****  * @note    This type is not part of the OSAL API and is provided
 203:../../os/hal/osal/rt-nil/osal.h ****  *          exclusively as an example and for convenience.
 204:../../os/hal/osal/rt-nil/osal.h ****  */
 205:../../os/hal/osal/rt-nil/osal.h **** typedef void (*eventcallback_t)(event_source_t *esp);
 206:../../os/hal/osal/rt-nil/osal.h **** 
 207:../../os/hal/osal/rt-nil/osal.h **** /**
 208:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Events source object.
 209:../../os/hal/osal/rt-nil/osal.h ****  * @note    The content of this structure is not part of the API and should
 210:../../os/hal/osal/rt-nil/osal.h ****  *          not be relied upon. Implementers may define this structure in
 211:../../os/hal/osal/rt-nil/osal.h ****  *          an entirely different way.
 212:../../os/hal/osal/rt-nil/osal.h ****  * @note    Retrieval and clearing of the flags are not defined in this
 213:../../os/hal/osal/rt-nil/osal.h ****  *          API and are implementation-dependent.
 214:../../os/hal/osal/rt-nil/osal.h ****  */
 215:../../os/hal/osal/rt-nil/osal.h **** struct event_source {
 216:../../os/hal/osal/rt-nil/osal.h ****   volatile eventflags_t flags;      /**< @brief Stored event flags.         */
 217:../../os/hal/osal/rt-nil/osal.h ****   eventcallback_t       cb;         /**< @brief Event source callback.      */
 218:../../os/hal/osal/rt-nil/osal.h ****   void                  *param;     /**< @brief User defined field.         */
 219:../../os/hal/osal/rt-nil/osal.h **** };
 220:../../os/hal/osal/rt-nil/osal.h **** #endif /* CH_CFG_USE_EVENTS == FALSE */
 221:../../os/hal/osal/rt-nil/osal.h **** 
 222:../../os/hal/osal/rt-nil/osal.h **** /**
 223:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a mutex.
 224:../../os/hal/osal/rt-nil/osal.h ****  * @note    If the OS does not support mutexes or there is no OS then the
 225:../../os/hal/osal/rt-nil/osal.h ****  *          mechanism can be simulated.
 226:../../os/hal/osal/rt-nil/osal.h ****  */
 227:../../os/hal/osal/rt-nil/osal.h **** #if CH_CFG_USE_MUTEXES || defined(__DOXYGEN__)
 228:../../os/hal/osal/rt-nil/osal.h **** #elif CH_CFG_USE_SEMAPHORES
 229:../../os/hal/osal/rt-nil/osal.h **** typedef semaphore_t mutex_t;
 230:../../os/hal/osal/rt-nil/osal.h **** #else
 231:../../os/hal/osal/rt-nil/osal.h **** typedef uint32_t mutex_t;
 232:../../os/hal/osal/rt-nil/osal.h **** #endif
 233:../../os/hal/osal/rt-nil/osal.h **** 
 234:../../os/hal/osal/rt-nil/osal.h **** #if 0
 235:../../os/hal/osal/rt-nil/osal.h **** /**
 236:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Type of a thread queue.
 237:../../os/hal/osal/rt-nil/osal.h ****  * @details A thread queue is a queue of sleeping threads, queued threads
 238:../../os/hal/osal/rt-nil/osal.h ****  *          can be dequeued one at time or all together.
 239:../../os/hal/osal/rt-nil/osal.h ****  * @note    In this implementation it is implemented as a single reference
 240:../../os/hal/osal/rt-nil/osal.h ****  *          because there are no real threads.
 241:../../os/hal/osal/rt-nil/osal.h ****  */
 242:../../os/hal/osal/rt-nil/osal.h **** typedef struct {
 243:../../os/hal/osal/rt-nil/osal.h ****   thread_reference_t    tr;
 244:../../os/hal/osal/rt-nil/osal.h **** } threads_queue_t;
 245:../../os/hal/osal/rt-nil/osal.h **** #endif
 246:../../os/hal/osal/rt-nil/osal.h **** 
 247:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 248:../../os/hal/osal/rt-nil/osal.h **** /* Module macros.                                                            */
 249:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 250:../../os/hal/osal/rt-nil/osal.h **** 
 251:../../os/hal/osal/rt-nil/osal.h **** /**
 252:../../os/hal/osal/rt-nil/osal.h ****  * @name    Debug related macros
 253:../../os/hal/osal/rt-nil/osal.h ****  * @{
 254:../../os/hal/osal/rt-nil/osal.h ****  */
 255:../../os/hal/osal/rt-nil/osal.h **** /**
 256:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Condition assertion.
 257:../../os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics with a
 258:../../os/hal/osal/rt-nil/osal.h ****  *          message and halts.
 259:../../os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_ASSERTIONS
 260:../../os/hal/osal/rt-nil/osal.h ****  *          switch is enabled.
 261:../../os/hal/osal/rt-nil/osal.h ****  * @note    The remark string is not currently used except for putting a
 262:../../os/hal/osal/rt-nil/osal.h ****  *          comment in the code about the assertion.
 263:../../os/hal/osal/rt-nil/osal.h ****  *
 264:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 265:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] remark    a remark string
 266:../../os/hal/osal/rt-nil/osal.h ****  *
 267:../../os/hal/osal/rt-nil/osal.h ****  * @api
 268:../../os/hal/osal/rt-nil/osal.h ****  */
 269:../../os/hal/osal/rt-nil/osal.h **** #define osalDbgAssert(c, remark) chDbgAssert(c, remark)
 270:../../os/hal/osal/rt-nil/osal.h **** 
 271:../../os/hal/osal/rt-nil/osal.h **** /**
 272:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Function parameters check.
 273:../../os/hal/osal/rt-nil/osal.h ****  * @details If the condition check fails then the OSAL panics and halts.
 274:../../os/hal/osal/rt-nil/osal.h ****  * @note    The condition is tested only if the @p OSAL_ENABLE_CHECKS switch
 275:../../os/hal/osal/rt-nil/osal.h ****  *          is enabled.
 276:../../os/hal/osal/rt-nil/osal.h ****  *
 277:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] c         the condition to be verified to be true
 278:../../os/hal/osal/rt-nil/osal.h ****  *
 279:../../os/hal/osal/rt-nil/osal.h ****  * @api
 280:../../os/hal/osal/rt-nil/osal.h ****  */
 281:../../os/hal/osal/rt-nil/osal.h **** #define osalDbgCheck(c) chDbgCheck(c)
 282:../../os/hal/osal/rt-nil/osal.h **** 
 283:../../os/hal/osal/rt-nil/osal.h **** /**
 284:../../os/hal/osal/rt-nil/osal.h ****  * @brief   I-Class state check.
 285:../../os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 286:../../os/hal/osal/rt-nil/osal.h ****  */
 287:../../os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassI() chDbgCheckClassI()
 288:../../os/hal/osal/rt-nil/osal.h **** 
 289:../../os/hal/osal/rt-nil/osal.h **** /**
 290:../../os/hal/osal/rt-nil/osal.h ****  * @brief   S-Class state check.
 291:../../os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 292:../../os/hal/osal/rt-nil/osal.h ****  */
 293:../../os/hal/osal/rt-nil/osal.h **** #define osalDbgCheckClassS() chDbgCheckClassS()
 294:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 295:../../os/hal/osal/rt-nil/osal.h **** 
 296:../../os/hal/osal/rt-nil/osal.h **** /**
 297:../../os/hal/osal/rt-nil/osal.h ****  * @name    IRQ service routines wrappers
 298:../../os/hal/osal/rt-nil/osal.h ****  * @{
 299:../../os/hal/osal/rt-nil/osal.h ****  */
 300:../../os/hal/osal/rt-nil/osal.h **** /**
 301:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Priority level verification macro.
 302:../../os/hal/osal/rt-nil/osal.h ****  */
 303:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_IS_VALID_PRIORITY(n) CH_IRQ_IS_VALID_KERNEL_PRIORITY(n)
 304:../../os/hal/osal/rt-nil/osal.h **** 
 305:../../os/hal/osal/rt-nil/osal.h **** /**
 306:../../os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ prologue code.
 307:../../os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the start of all IRQ handlers.
 308:../../os/hal/osal/rt-nil/osal.h ****  */
 309:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_PROLOGUE() CH_IRQ_PROLOGUE()
 310:../../os/hal/osal/rt-nil/osal.h **** 
 311:../../os/hal/osal/rt-nil/osal.h **** /**
 312:../../os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ epilogue code.
 313:../../os/hal/osal/rt-nil/osal.h ****  * @details This macro must be inserted at the end of all IRQ handlers.
 314:../../os/hal/osal/rt-nil/osal.h ****  */
 315:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_EPILOGUE() CH_IRQ_EPILOGUE()
 316:../../os/hal/osal/rt-nil/osal.h **** 
 317:../../os/hal/osal/rt-nil/osal.h **** /**
 318:../../os/hal/osal/rt-nil/osal.h ****  * @brief   IRQ handler function declaration.
 319:../../os/hal/osal/rt-nil/osal.h ****  * @details This macro hides the details of an ISR function declaration.
 320:../../os/hal/osal/rt-nil/osal.h ****  *
 321:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] id        a vector name as defined in @p vectors.s
 322:../../os/hal/osal/rt-nil/osal.h ****  */
 323:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_IRQ_HANDLER(id) CH_IRQ_HANDLER(id)
 324:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 325:../../os/hal/osal/rt-nil/osal.h **** 
 326:../../os/hal/osal/rt-nil/osal.h **** /**
 327:../../os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities
 328:../../os/hal/osal/rt-nil/osal.h ****  * @{
 329:../../os/hal/osal/rt-nil/osal.h ****  */
 330:../../os/hal/osal/rt-nil/osal.h **** /**
 331:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to time interval.
 332:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to system ticks number.
 333:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 334:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 335:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 336:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 337:../../os/hal/osal/rt-nil/osal.h ****  *
 338:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      number of seconds
 339:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 340:../../os/hal/osal/rt-nil/osal.h ****  *
 341:../../os/hal/osal/rt-nil/osal.h ****  * @api
 342:../../os/hal/osal/rt-nil/osal.h ****  */
 343:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_S2I(secs) TIME_S2I(secs)
 344:../../os/hal/osal/rt-nil/osal.h **** 
 345:../../os/hal/osal/rt-nil/osal.h **** /**
 346:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to time interval.
 347:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to system ticks number.
 348:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 349:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 350:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 351:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 352:../../os/hal/osal/rt-nil/osal.h ****  *
 353:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     number of milliseconds
 354:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 355:../../os/hal/osal/rt-nil/osal.h ****  *
 356:../../os/hal/osal/rt-nil/osal.h ****  * @api
 357:../../os/hal/osal/rt-nil/osal.h ****  */
 358:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2I(msecs) TIME_MS2I(msecs)
 359:../../os/hal/osal/rt-nil/osal.h **** 
 360:../../os/hal/osal/rt-nil/osal.h **** /**
 361:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to time interval.
 362:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to system ticks number.
 363:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next tick boundary.
 364:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 365:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 366:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 367:../../os/hal/osal/rt-nil/osal.h ****  *
 368:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     number of microseconds
 369:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of ticks.
 370:../../os/hal/osal/rt-nil/osal.h ****  *
 371:../../os/hal/osal/rt-nil/osal.h ****  * @api
 372:../../os/hal/osal/rt-nil/osal.h ****  */
 373:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_US2I(usecs) TIME_US2I(usecs)
 374:../../os/hal/osal/rt-nil/osal.h **** 
 375:../../os/hal/osal/rt-nil/osal.h **** /**
 376:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to seconds.
 377:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to seconds.
 378:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next second boundary.
 379:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 380:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 381:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 382:../../os/hal/osal/rt-nil/osal.h ****  *
 383:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 384:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of seconds.
 385:../../os/hal/osal/rt-nil/osal.h ****  *
 386:../../os/hal/osal/rt-nil/osal.h ****  * @api
 387:../../os/hal/osal/rt-nil/osal.h ****  */
 388:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_I2S(interval) TIME_I2S(interval)
 389:../../os/hal/osal/rt-nil/osal.h **** 
 390:../../os/hal/osal/rt-nil/osal.h **** /**
 391:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to milliseconds.
 392:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to milliseconds.
 393:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next millisecond boundary.
 394:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 395:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 396:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 397:../../os/hal/osal/rt-nil/osal.h ****  *
 398:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 399:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of milliseconds.
 400:../../os/hal/osal/rt-nil/osal.h ****  *
 401:../../os/hal/osal/rt-nil/osal.h ****  * @api
 402:../../os/hal/osal/rt-nil/osal.h ****  */
 403:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_I2MS(interval) TIME_I2MS(interval)
 404:../../os/hal/osal/rt-nil/osal.h **** 
 405:../../os/hal/osal/rt-nil/osal.h **** /**
 406:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Time interval to microseconds.
 407:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from system ticks number to microseconds.
 408:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded up to the next microsecond boundary.
 409:../../os/hal/osal/rt-nil/osal.h ****  * @note    Use of this macro for large values is not secure because
 410:../../os/hal/osal/rt-nil/osal.h ****  *          integer overflows, make sure your value can be correctly
 411:../../os/hal/osal/rt-nil/osal.h ****  *          converted.
 412:../../os/hal/osal/rt-nil/osal.h ****  *
 413:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval in ticks
 414:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of microseconds.
 415:../../os/hal/osal/rt-nil/osal.h ****  *
 416:../../os/hal/osal/rt-nil/osal.h ****  * @api
 417:../../os/hal/osal/rt-nil/osal.h ****  */
 418:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_I2US(interval) TIME_I2US(interval)
 419:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 420:../../os/hal/osal/rt-nil/osal.h **** 
 421:../../os/hal/osal/rt-nil/osal.h **** /**
 422:../../os/hal/osal/rt-nil/osal.h ****  * @name    Time conversion utilities for the realtime counter
 423:../../os/hal/osal/rt-nil/osal.h ****  * @{
 424:../../os/hal/osal/rt-nil/osal.h ****  */
 425:../../os/hal/osal/rt-nil/osal.h **** /**
 426:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Seconds to realtime counter.
 427:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from seconds to realtime counter cycles.
 428:../../os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1.
 429:../../os/hal/osal/rt-nil/osal.h ****  *
 430:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 431:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] sec       number of seconds
 432:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 433:../../os/hal/osal/rt-nil/osal.h ****  *
 434:../../os/hal/osal/rt-nil/osal.h ****  * @api
 435:../../os/hal/osal/rt-nil/osal.h ****  */
 436:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_S2RTC(freq, sec) S2RTC(freq, sec)
 437:../../os/hal/osal/rt-nil/osal.h **** 
 438:../../os/hal/osal/rt-nil/osal.h **** /**
 439:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Milliseconds to realtime counter.
 440:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from milliseconds to realtime counter cycles.
 441:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next millisecond boundary.
 442:../../os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000.
 443:../../os/hal/osal/rt-nil/osal.h ****  *
 444:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 445:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msec      number of milliseconds
 446:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 447:../../os/hal/osal/rt-nil/osal.h ****  *
 448:../../os/hal/osal/rt-nil/osal.h ****  * @api
 449:../../os/hal/osal/rt-nil/osal.h ****  */
 450:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_MS2RTC(freq, msec) MS2RTC(freq, msec)
 451:../../os/hal/osal/rt-nil/osal.h **** 
 452:../../os/hal/osal/rt-nil/osal.h **** /**
 453:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Microseconds to realtime counter.
 454:../../os/hal/osal/rt-nil/osal.h ****  * @details Converts from microseconds to realtime counter cycles.
 455:../../os/hal/osal/rt-nil/osal.h ****  * @note    The result is rounded upward to the next microsecond boundary.
 456:../../os/hal/osal/rt-nil/osal.h ****  * @note    The macro assumes that @p freq >= @p 1000000.
 457:../../os/hal/osal/rt-nil/osal.h ****  *
 458:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] freq      clock frequency, in Hz, of the realtime counter
 459:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] usec      number of microseconds
 460:../../os/hal/osal/rt-nil/osal.h ****  * @return              The number of cycles.
 461:../../os/hal/osal/rt-nil/osal.h ****  *
 462:../../os/hal/osal/rt-nil/osal.h ****  * @api
 463:../../os/hal/osal/rt-nil/osal.h ****  */
 464:../../os/hal/osal/rt-nil/osal.h **** #define OSAL_US2RTC(freq, usec) US2RTC(freq, usec)
 465:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 466:../../os/hal/osal/rt-nil/osal.h **** 
 467:../../os/hal/osal/rt-nil/osal.h **** /**
 468:../../os/hal/osal/rt-nil/osal.h ****  * @name    Sleep macros using absolute time
 469:../../os/hal/osal/rt-nil/osal.h ****  * @{
 470:../../os/hal/osal/rt-nil/osal.h ****  */
 471:../../os/hal/osal/rt-nil/osal.h **** /**
 472:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of seconds.
 473:../../os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 474:../../os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 475:../../os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 476:../../os/hal/osal/rt-nil/osal.h ****  *
 477:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] secs      time in seconds, must be different from zero
 478:../../os/hal/osal/rt-nil/osal.h ****  *
 479:../../os/hal/osal/rt-nil/osal.h ****  * @api
 480:../../os/hal/osal/rt-nil/osal.h ****  */
 481:../../os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepSeconds(secs) osalThreadSleep(OSAL_S2I(secs))
 482:../../os/hal/osal/rt-nil/osal.h **** 
 483:../../os/hal/osal/rt-nil/osal.h **** /**
 484:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 485:../../os/hal/osal/rt-nil/osal.h ****  *          milliseconds.
 486:../../os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 487:../../os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 488:../../os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 489:../../os/hal/osal/rt-nil/osal.h ****  *
 490:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msecs     time in milliseconds, must be different from zero
 491:../../os/hal/osal/rt-nil/osal.h ****  *
 492:../../os/hal/osal/rt-nil/osal.h ****  * @api
 493:../../os/hal/osal/rt-nil/osal.h ****  */
 494:../../os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMilliseconds(msecs) osalThreadSleep(OSAL_MS2I(msecs))
 495:../../os/hal/osal/rt-nil/osal.h **** 
 496:../../os/hal/osal/rt-nil/osal.h **** /**
 497:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Delays the invoking thread for the specified number of
 498:../../os/hal/osal/rt-nil/osal.h ****  *          microseconds.
 499:../../os/hal/osal/rt-nil/osal.h ****  * @note    The specified time is rounded up to a value allowed by the real
 500:../../os/hal/osal/rt-nil/osal.h ****  *          system tick clock.
 501:../../os/hal/osal/rt-nil/osal.h ****  * @note    The maximum specifiable value is implementation dependent.
 502:../../os/hal/osal/rt-nil/osal.h ****  *
 503:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] usecs     time in microseconds, must be different from zero
 504:../../os/hal/osal/rt-nil/osal.h ****  *
 505:../../os/hal/osal/rt-nil/osal.h ****  * @api
 506:../../os/hal/osal/rt-nil/osal.h ****  */
 507:../../os/hal/osal/rt-nil/osal.h **** #define osalThreadSleepMicroseconds(usecs) osalThreadSleep(OSAL_US2I(usecs))
 508:../../os/hal/osal/rt-nil/osal.h **** /** @} */
 509:../../os/hal/osal/rt-nil/osal.h **** 
 510:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 511:../../os/hal/osal/rt-nil/osal.h **** /* External declarations.                                                    */
 512:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 513:../../os/hal/osal/rt-nil/osal.h **** 
 514:../../os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 515:../../os/hal/osal/rt-nil/osal.h **** extern "C" {
 516:../../os/hal/osal/rt-nil/osal.h **** #endif
 517:../../os/hal/osal/rt-nil/osal.h **** 
 518:../../os/hal/osal/rt-nil/osal.h **** #ifdef __cplusplus
 519:../../os/hal/osal/rt-nil/osal.h **** }
 520:../../os/hal/osal/rt-nil/osal.h **** #endif
 521:../../os/hal/osal/rt-nil/osal.h **** 
 522:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 523:../../os/hal/osal/rt-nil/osal.h **** /* Module inline functions.                                                  */
 524:../../os/hal/osal/rt-nil/osal.h **** /*===========================================================================*/
 525:../../os/hal/osal/rt-nil/osal.h **** 
 526:../../os/hal/osal/rt-nil/osal.h **** /**
 527:../../os/hal/osal/rt-nil/osal.h ****  * @brief   OSAL module initialization.
 528:../../os/hal/osal/rt-nil/osal.h ****  *
 529:../../os/hal/osal/rt-nil/osal.h ****  * @api
 530:../../os/hal/osal/rt-nil/osal.h ****  */
 531:../../os/hal/osal/rt-nil/osal.h **** static inline void osalInit(void) {
 532:../../os/hal/osal/rt-nil/osal.h **** 
 533:../../os/hal/osal/rt-nil/osal.h **** }
 534:../../os/hal/osal/rt-nil/osal.h **** 
 535:../../os/hal/osal/rt-nil/osal.h **** /**
 536:../../os/hal/osal/rt-nil/osal.h ****  * @brief   System halt with error message.
 537:../../os/hal/osal/rt-nil/osal.h ****  *
 538:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] reason    the halt message pointer
 539:../../os/hal/osal/rt-nil/osal.h ****  *
 540:../../os/hal/osal/rt-nil/osal.h ****  * @api
 541:../../os/hal/osal/rt-nil/osal.h ****  */
 542:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysHalt(const char *reason) {
 543:../../os/hal/osal/rt-nil/osal.h **** 
 544:../../os/hal/osal/rt-nil/osal.h ****   chSysHalt(reason);
 545:../../os/hal/osal/rt-nil/osal.h **** }
 546:../../os/hal/osal/rt-nil/osal.h **** 
 547:../../os/hal/osal/rt-nil/osal.h **** /**
 548:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Disables interrupts globally.
 549:../../os/hal/osal/rt-nil/osal.h ****  *
 550:../../os/hal/osal/rt-nil/osal.h ****  * @special
 551:../../os/hal/osal/rt-nil/osal.h ****  */
 552:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysDisable(void) {
 553:../../os/hal/osal/rt-nil/osal.h **** 
 554:../../os/hal/osal/rt-nil/osal.h ****   chSysDisable();
 555:../../os/hal/osal/rt-nil/osal.h **** }
 556:../../os/hal/osal/rt-nil/osal.h **** 
 557:../../os/hal/osal/rt-nil/osal.h **** /**
 558:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Enables interrupts globally.
 559:../../os/hal/osal/rt-nil/osal.h ****  *
 560:../../os/hal/osal/rt-nil/osal.h ****  * @special
 561:../../os/hal/osal/rt-nil/osal.h ****  */
 562:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysEnable(void) {
 563:../../os/hal/osal/rt-nil/osal.h **** 
 564:../../os/hal/osal/rt-nil/osal.h ****   chSysEnable();
 565:../../os/hal/osal/rt-nil/osal.h **** }
 566:../../os/hal/osal/rt-nil/osal.h **** 
 567:../../os/hal/osal/rt-nil/osal.h **** /**
 568:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from thread context.
 569:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 570:../../os/hal/osal/rt-nil/osal.h ****  *
 571:../../os/hal/osal/rt-nil/osal.h ****  * @special
 572:../../os/hal/osal/rt-nil/osal.h ****  */
 573:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysLock(void) {
 574:../../os/hal/osal/rt-nil/osal.h **** 
 575:../../os/hal/osal/rt-nil/osal.h ****   chSysLock();
 576:../../os/hal/osal/rt-nil/osal.h **** }
 577:../../os/hal/osal/rt-nil/osal.h **** 
 578:../../os/hal/osal/rt-nil/osal.h **** /**
 579:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from thread context.
 580:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 581:../../os/hal/osal/rt-nil/osal.h ****  *
 582:../../os/hal/osal/rt-nil/osal.h ****  * @special
 583:../../os/hal/osal/rt-nil/osal.h ****  */
 584:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlock(void) {
 585:../../os/hal/osal/rt-nil/osal.h **** 
 586:../../os/hal/osal/rt-nil/osal.h ****   chSysUnlock();
 587:../../os/hal/osal/rt-nil/osal.h **** }
 588:../../os/hal/osal/rt-nil/osal.h **** 
 589:../../os/hal/osal/rt-nil/osal.h **** /**
 590:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Enters a critical zone from ISR context.
 591:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 592:../../os/hal/osal/rt-nil/osal.h ****  *
 593:../../os/hal/osal/rt-nil/osal.h ****  * @special
 594:../../os/hal/osal/rt-nil/osal.h ****  */
 595:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysLockFromISR(void) {
 596:../../os/hal/osal/rt-nil/osal.h **** 
 597:../../os/hal/osal/rt-nil/osal.h ****   chSysLockFromISR();
 598:../../os/hal/osal/rt-nil/osal.h **** }
 599:../../os/hal/osal/rt-nil/osal.h **** 
 600:../../os/hal/osal/rt-nil/osal.h **** /**
 601:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Leaves a critical zone from ISR context.
 602:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function cannot be used for reentrant critical zones.
 603:../../os/hal/osal/rt-nil/osal.h ****  *
 604:../../os/hal/osal/rt-nil/osal.h ****  * @special
 605:../../os/hal/osal/rt-nil/osal.h ****  */
 606:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysUnlockFromISR(void) {
 607:../../os/hal/osal/rt-nil/osal.h **** 
 608:../../os/hal/osal/rt-nil/osal.h ****   chSysUnlockFromISR();
 609:../../os/hal/osal/rt-nil/osal.h **** }
 610:../../os/hal/osal/rt-nil/osal.h **** 
 611:../../os/hal/osal/rt-nil/osal.h **** /**
 612:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Returns the execution status and enters a critical zone.
 613:../../os/hal/osal/rt-nil/osal.h ****  * @details This functions enters into a critical zone and can be called
 614:../../os/hal/osal/rt-nil/osal.h ****  *          from any context. Because its flexibility it is less efficient
 615:../../os/hal/osal/rt-nil/osal.h ****  *          than @p chSysLock() which is preferable when the calling context
 616:../../os/hal/osal/rt-nil/osal.h ****  *          is known.
 617:../../os/hal/osal/rt-nil/osal.h ****  * @post    The system is in a critical zone.
 618:../../os/hal/osal/rt-nil/osal.h ****  *
 619:../../os/hal/osal/rt-nil/osal.h ****  * @return              The previous system status, the encoding of this
 620:../../os/hal/osal/rt-nil/osal.h ****  *                      status word is architecture-dependent and opaque.
 621:../../os/hal/osal/rt-nil/osal.h ****  *
 622:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 623:../../os/hal/osal/rt-nil/osal.h ****  */
 624:../../os/hal/osal/rt-nil/osal.h **** static inline syssts_t osalSysGetStatusAndLockX(void) {
 625:../../os/hal/osal/rt-nil/osal.h **** 
 626:../../os/hal/osal/rt-nil/osal.h ****   return chSysGetStatusAndLockX();
 627:../../os/hal/osal/rt-nil/osal.h **** }
 628:../../os/hal/osal/rt-nil/osal.h **** 
 629:../../os/hal/osal/rt-nil/osal.h **** /**
 630:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Restores the specified execution status and leaves a critical zone.
 631:../../os/hal/osal/rt-nil/osal.h ****  * @note    A call to @p chSchRescheduleS() is automatically performed
 632:../../os/hal/osal/rt-nil/osal.h ****  *          if exiting the critical zone and if not in ISR context.
 633:../../os/hal/osal/rt-nil/osal.h ****  *
 634:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] sts       the system status to be restored.
 635:../../os/hal/osal/rt-nil/osal.h ****  *
 636:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 637:../../os/hal/osal/rt-nil/osal.h ****  */
 638:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysRestoreStatusX(syssts_t sts) {
 639:../../os/hal/osal/rt-nil/osal.h **** 
 640:../../os/hal/osal/rt-nil/osal.h ****   chSysRestoreStatusX(sts);
 641:../../os/hal/osal/rt-nil/osal.h **** }
 642:../../os/hal/osal/rt-nil/osal.h **** 
 643:../../os/hal/osal/rt-nil/osal.h **** /**
 644:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Polled delay.
 645:../../os/hal/osal/rt-nil/osal.h ****  * @note    The real delay is always few cycles in excess of the specified
 646:../../os/hal/osal/rt-nil/osal.h ****  *          value.
 647:../../os/hal/osal/rt-nil/osal.h ****  *
 648:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] cycles    number of cycles
 649:../../os/hal/osal/rt-nil/osal.h ****  *
 650:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 651:../../os/hal/osal/rt-nil/osal.h ****  */
 652:../../os/hal/osal/rt-nil/osal.h **** #if (PORT_SUPPORTS_RT == TRUE) || defined(__DOXYGEN__)
 653:../../os/hal/osal/rt-nil/osal.h **** static inline void osalSysPolledDelayX(rtcnt_t cycles) {
 654:../../os/hal/osal/rt-nil/osal.h **** 
 655:../../os/hal/osal/rt-nil/osal.h ****   chSysPolledDelayX(cycles);
 656:../../os/hal/osal/rt-nil/osal.h **** }
 657:../../os/hal/osal/rt-nil/osal.h **** #endif
 658:../../os/hal/osal/rt-nil/osal.h **** 
 659:../../os/hal/osal/rt-nil/osal.h **** /**
 660:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Systick callback for the underlying OS.
 661:../../os/hal/osal/rt-nil/osal.h ****  * @note    This callback is only defined if the OSAL requires such a
 662:../../os/hal/osal/rt-nil/osal.h ****  *          service from the HAL.
 663:../../os/hal/osal/rt-nil/osal.h ****  */
 664:../../os/hal/osal/rt-nil/osal.h **** #if (OSAL_ST_MODE != OSAL_ST_MODE_NONE) || defined(__DOXYGEN__)
 665:../../os/hal/osal/rt-nil/osal.h **** static inline void osalOsTimerHandlerI(void) {
 666:../../os/hal/osal/rt-nil/osal.h **** 
 667:../../os/hal/osal/rt-nil/osal.h ****   chSysTimerHandlerI();
 668:../../os/hal/osal/rt-nil/osal.h **** }
 669:../../os/hal/osal/rt-nil/osal.h **** #endif
 670:../../os/hal/osal/rt-nil/osal.h **** 
 671:../../os/hal/osal/rt-nil/osal.h **** /**
 672:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if a reschedule is required and performs it.
 673:../../os/hal/osal/rt-nil/osal.h ****  * @note    I-Class functions invoked from thread context must not reschedule
 674:../../os/hal/osal/rt-nil/osal.h ****  *          by themselves, an explicit reschedule using this function is
 675:../../os/hal/osal/rt-nil/osal.h ****  *          required in this scenario.
 676:../../os/hal/osal/rt-nil/osal.h ****  * @note    Not implemented in this simplified OSAL.
 677:../../os/hal/osal/rt-nil/osal.h ****  *
 678:../../os/hal/osal/rt-nil/osal.h ****  * @sclass
 679:../../os/hal/osal/rt-nil/osal.h ****  */
 680:../../os/hal/osal/rt-nil/osal.h **** static inline void osalOsRescheduleS(void) {
 681:../../os/hal/osal/rt-nil/osal.h **** 
 682:../../os/hal/osal/rt-nil/osal.h ****   chSchRescheduleS();
 683:../../os/hal/osal/rt-nil/osal.h **** }
 684:../../os/hal/osal/rt-nil/osal.h **** 
 685:../../os/hal/osal/rt-nil/osal.h **** /**
 686:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Current system time.
 687:../../os/hal/osal/rt-nil/osal.h ****  * @details Returns the number of system ticks since the @p osalInit()
 688:../../os/hal/osal/rt-nil/osal.h ****  *          invocation.
 689:../../os/hal/osal/rt-nil/osal.h ****  * @note    The counter can reach its maximum and then restart from zero.
 690:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context but its atomicity
 691:../../os/hal/osal/rt-nil/osal.h ****  *          is not guaranteed on architectures whose word size is less than
 692:../../os/hal/osal/rt-nil/osal.h ****  *          @p systime_t size.
 693:../../os/hal/osal/rt-nil/osal.h ****  *
 694:../../os/hal/osal/rt-nil/osal.h ****  * @return              The system time in ticks.
 695:../../os/hal/osal/rt-nil/osal.h ****  *
 696:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 697:../../os/hal/osal/rt-nil/osal.h ****  */
 698:../../os/hal/osal/rt-nil/osal.h **** static inline systime_t osalOsGetSystemTimeX(void) {
 699:../../os/hal/osal/rt-nil/osal.h **** 
 700:../../os/hal/osal/rt-nil/osal.h ****   return chVTGetSystemTimeX();
 701:../../os/hal/osal/rt-nil/osal.h **** }
 702:../../os/hal/osal/rt-nil/osal.h **** 
 703:../../os/hal/osal/rt-nil/osal.h **** /**
 704:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Adds an interval to a system time returning a system time.
 705:../../os/hal/osal/rt-nil/osal.h ****  *
 706:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] systime   base system time
 707:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] interval  interval to be added
 708:../../os/hal/osal/rt-nil/osal.h ****  * @return              The new system time.
 709:../../os/hal/osal/rt-nil/osal.h ****  *
 710:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 711:../../os/hal/osal/rt-nil/osal.h ****  */
 712:../../os/hal/osal/rt-nil/osal.h **** static inline systime_t osalTimeAddX(systime_t systime,
 713:../../os/hal/osal/rt-nil/osal.h ****                                      sysinterval_t interval) {
 714:../../os/hal/osal/rt-nil/osal.h **** 
 715:../../os/hal/osal/rt-nil/osal.h ****   return chTimeAddX(systime, interval);
 716:../../os/hal/osal/rt-nil/osal.h **** }
 717:../../os/hal/osal/rt-nil/osal.h **** 
 718:../../os/hal/osal/rt-nil/osal.h **** /**
 719:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Subtracts two system times returning an interval.
 720:../../os/hal/osal/rt-nil/osal.h ****  *
 721:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] start     first system time
 722:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] end       second system time
 723:../../os/hal/osal/rt-nil/osal.h ****  * @return              The interval representing the time difference.
 724:../../os/hal/osal/rt-nil/osal.h ****  *
 725:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 726:../../os/hal/osal/rt-nil/osal.h ****  */
 727:../../os/hal/osal/rt-nil/osal.h **** static inline sysinterval_t osalTimeDiffX(systime_t start, systime_t end) {
 728:../../os/hal/osal/rt-nil/osal.h **** 
 729:../../os/hal/osal/rt-nil/osal.h ****   return chTimeDiffX(start, end);
 730:../../os/hal/osal/rt-nil/osal.h **** }
 731:../../os/hal/osal/rt-nil/osal.h **** 
 732:../../os/hal/osal/rt-nil/osal.h **** /**
 733:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Checks if the specified time is within the specified time window.
 734:../../os/hal/osal/rt-nil/osal.h ****  * @note    When start==end then the function returns always true because the
 735:../../os/hal/osal/rt-nil/osal.h ****  *          whole time range is specified.
 736:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function can be called from any context.
 737:../../os/hal/osal/rt-nil/osal.h ****  *
 738:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] time      the time to be verified
 739:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] start     the start of the time window (inclusive)
 740:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] end       the end of the time window (non inclusive)
 741:../../os/hal/osal/rt-nil/osal.h ****  * @retval true         current time within the specified time window.
 742:../../os/hal/osal/rt-nil/osal.h ****  * @retval false        current time not within the specified time window.
 743:../../os/hal/osal/rt-nil/osal.h ****  *
 744:../../os/hal/osal/rt-nil/osal.h ****  * @xclass
 745:../../os/hal/osal/rt-nil/osal.h ****  */
 746:../../os/hal/osal/rt-nil/osal.h **** static inline bool osalTimeIsInRangeX(systime_t time,
 747:../../os/hal/osal/rt-nil/osal.h ****                                       systime_t start,
 748:../../os/hal/osal/rt-nil/osal.h ****                                       systime_t end) {
 749:../../os/hal/osal/rt-nil/osal.h **** 
 750:../../os/hal/osal/rt-nil/osal.h ****   return chTimeIsInRangeX(time, start, end);
 751:../../os/hal/osal/rt-nil/osal.h **** }
 752:../../os/hal/osal/rt-nil/osal.h **** 
 753:../../os/hal/osal/rt-nil/osal.h **** /**
 754:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 755:../../os/hal/osal/rt-nil/osal.h ****  *
 756:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 757:../../os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 758:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 759:../../os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 760:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 761:../../os/hal/osal/rt-nil/osal.h ****  *                      .
 762:../../os/hal/osal/rt-nil/osal.h ****  *
 763:../../os/hal/osal/rt-nil/osal.h ****  * @sclass
 764:../../os/hal/osal/rt-nil/osal.h ****  */
 765:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleepS(sysinterval_t delay) {
 766:../../os/hal/osal/rt-nil/osal.h **** 
 767:../../os/hal/osal/rt-nil/osal.h ****   chThdSleepS(delay);
 768:../../os/hal/osal/rt-nil/osal.h **** }
 769:../../os/hal/osal/rt-nil/osal.h **** 
 770:../../os/hal/osal/rt-nil/osal.h **** /**
 771:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Suspends the invoking thread for the specified time.
 772:../../os/hal/osal/rt-nil/osal.h ****  *
 773:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] delay     the delay in system ticks, the special values are
 774:../../os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 775:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE is allowed but interpreted as a
 776:../../os/hal/osal/rt-nil/osal.h ****  *                        normal time specification.
 777:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE this value is not allowed.
 778:../../os/hal/osal/rt-nil/osal.h ****  *                      .
 779:../../os/hal/osal/rt-nil/osal.h ****  *
 780:../../os/hal/osal/rt-nil/osal.h ****  * @api
 781:../../os/hal/osal/rt-nil/osal.h ****  */
 782:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadSleep(sysinterval_t delay) {
 783:../../os/hal/osal/rt-nil/osal.h **** 
 784:../../os/hal/osal/rt-nil/osal.h ****   chThdSleep(delay);
 785:../../os/hal/osal/rt-nil/osal.h **** }
 786:../../os/hal/osal/rt-nil/osal.h **** 
 787:../../os/hal/osal/rt-nil/osal.h **** /**
 788:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 789:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 790:../../os/hal/osal/rt-nil/osal.h ****  *          context.
 791:../../os/hal/osal/rt-nil/osal.h ****  *
 792:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 793:../../os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 794:../../os/hal/osal/rt-nil/osal.h ****  *
 795:../../os/hal/osal/rt-nil/osal.h ****  * @sclass
 796:../../os/hal/osal/rt-nil/osal.h ****  */
 797:../../os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendS(thread_reference_t *trp) {
 798:../../os/hal/osal/rt-nil/osal.h **** 
 799:../../os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, TIME_INFINITE);
 800:../../os/hal/osal/rt-nil/osal.h **** }
 801:../../os/hal/osal/rt-nil/osal.h **** 
 802:../../os/hal/osal/rt-nil/osal.h **** /**
 803:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Sends the current thread sleeping and sets a reference variable.
 804:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 805:../../os/hal/osal/rt-nil/osal.h ****  *          context.
 806:../../os/hal/osal/rt-nil/osal.h ****  *
 807:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 808:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] timeout   the timeout in system ticks, the special values are
 809:../../os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 810:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE the thread enters an infinite sleep
 811:../../os/hal/osal/rt-nil/osal.h ****  *                        state.
 812:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE the thread is not enqueued and
 813:../../os/hal/osal/rt-nil/osal.h ****  *                        the function returns @p MSG_TIMEOUT as if a timeout
 814:../../os/hal/osal/rt-nil/osal.h ****  *                        occurred.
 815:../../os/hal/osal/rt-nil/osal.h ****  *                      .
 816:../../os/hal/osal/rt-nil/osal.h ****  * @return              The wake up message.
 817:../../os/hal/osal/rt-nil/osal.h ****  * @retval MSG_TIMEOUT  if the operation timed out.
 818:../../os/hal/osal/rt-nil/osal.h ****  *
 819:../../os/hal/osal/rt-nil/osal.h ****  * @sclass
 820:../../os/hal/osal/rt-nil/osal.h ****  */
 821:../../os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadSuspendTimeoutS(thread_reference_t *trp,
 822:../../os/hal/osal/rt-nil/osal.h ****                                               sysinterval_t timeout) {
 823:../../os/hal/osal/rt-nil/osal.h **** 
 824:../../os/hal/osal/rt-nil/osal.h ****   return chThdSuspendTimeoutS(trp, timeout);
 825:../../os/hal/osal/rt-nil/osal.h **** }
 826:../../os/hal/osal/rt-nil/osal.h **** 
 827:../../os/hal/osal/rt-nil/osal.h **** /**
 828:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Wakes up a thread waiting on a thread reference object.
 829:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function must not reschedule because it can be called from
 830:../../os/hal/osal/rt-nil/osal.h ****  *          ISR context.
 831:../../os/hal/osal/rt-nil/osal.h ****  *
 832:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 833:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 834:../../os/hal/osal/rt-nil/osal.h ****  *
 835:../../os/hal/osal/rt-nil/osal.h ****  * @iclass
 836:../../os/hal/osal/rt-nil/osal.h ****  */
 837:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadResumeI(thread_reference_t *trp, msg_t msg) {
 838:../../os/hal/osal/rt-nil/osal.h **** 
 839:../../os/hal/osal/rt-nil/osal.h ****   chThdResumeI(trp, msg);
 840:../../os/hal/osal/rt-nil/osal.h **** }
 841:../../os/hal/osal/rt-nil/osal.h **** 
 842:../../os/hal/osal/rt-nil/osal.h **** /**
 843:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Wakes up a thread waiting on a thread reference object.
 844:../../os/hal/osal/rt-nil/osal.h ****  * @note    This function must reschedule, it can only be called from thread
 845:../../os/hal/osal/rt-nil/osal.h ****  *          context.
 846:../../os/hal/osal/rt-nil/osal.h ****  *
 847:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] trp       a pointer to a thread reference object
 848:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 849:../../os/hal/osal/rt-nil/osal.h ****  *
 850:../../os/hal/osal/rt-nil/osal.h ****  * @iclass
 851:../../os/hal/osal/rt-nil/osal.h ****  */
 852:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadResumeS(thread_reference_t *trp, msg_t msg) {
 853:../../os/hal/osal/rt-nil/osal.h **** 
 854:../../os/hal/osal/rt-nil/osal.h ****   chThdResumeS(trp, msg);
 855:../../os/hal/osal/rt-nil/osal.h **** }
 856:../../os/hal/osal/rt-nil/osal.h **** 
 857:../../os/hal/osal/rt-nil/osal.h **** /**
 858:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Initializes a threads queue object.
 859:../../os/hal/osal/rt-nil/osal.h ****  *
 860:../../os/hal/osal/rt-nil/osal.h ****  * @param[out] tqp      pointer to the threads queue object
 861:../../os/hal/osal/rt-nil/osal.h ****  *
 862:../../os/hal/osal/rt-nil/osal.h ****  * @init
 863:../../os/hal/osal/rt-nil/osal.h ****  */
 864:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadQueueObjectInit(threads_queue_t *tqp) {
 865:../../os/hal/osal/rt-nil/osal.h **** 
 866:../../os/hal/osal/rt-nil/osal.h ****   chThdQueueObjectInit(tqp);
 867:../../os/hal/osal/rt-nil/osal.h **** }
 868:../../os/hal/osal/rt-nil/osal.h **** 
 869:../../os/hal/osal/rt-nil/osal.h **** /**
 870:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Enqueues the caller thread.
 871:../../os/hal/osal/rt-nil/osal.h ****  * @details The caller thread is enqueued and put to sleep until it is
 872:../../os/hal/osal/rt-nil/osal.h ****  *          dequeued or the specified timeouts expires.
 873:../../os/hal/osal/rt-nil/osal.h ****  *
 874:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] tqp       pointer to the threads queue object
 875:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] timeout   the timeout in system ticks, the special values are
 876:../../os/hal/osal/rt-nil/osal.h ****  *                      handled as follow:
 877:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_INFINITE the thread enters an infinite sleep
 878:../../os/hal/osal/rt-nil/osal.h ****  *                        state.
 879:../../os/hal/osal/rt-nil/osal.h ****  *                      - @a TIME_IMMEDIATE the thread is not enqueued and
 880:../../os/hal/osal/rt-nil/osal.h ****  *                        the function returns @p MSG_TIMEOUT as if a timeout
 881:../../os/hal/osal/rt-nil/osal.h ****  *                        occurred.
 882:../../os/hal/osal/rt-nil/osal.h ****  *                      .
 883:../../os/hal/osal/rt-nil/osal.h ****  * @return              The message from @p osalQueueWakeupOneI() or
 884:../../os/hal/osal/rt-nil/osal.h ****  *                      @p osalQueueWakeupAllI() functions.
 885:../../os/hal/osal/rt-nil/osal.h ****  * @retval MSG_TIMEOUT  if the thread has not been dequeued within the
 886:../../os/hal/osal/rt-nil/osal.h ****  *                      specified timeout or if the function has been
 887:../../os/hal/osal/rt-nil/osal.h ****  *                      invoked with @p TIME_IMMEDIATE as timeout
 888:../../os/hal/osal/rt-nil/osal.h ****  *                      specification.
 889:../../os/hal/osal/rt-nil/osal.h ****  *
 890:../../os/hal/osal/rt-nil/osal.h ****  * @sclass
 891:../../os/hal/osal/rt-nil/osal.h ****  */
 892:../../os/hal/osal/rt-nil/osal.h **** static inline msg_t osalThreadEnqueueTimeoutS(threads_queue_t *tqp,
 893:../../os/hal/osal/rt-nil/osal.h ****                                               sysinterval_t timeout) {
 894:../../os/hal/osal/rt-nil/osal.h **** 
 895:../../os/hal/osal/rt-nil/osal.h ****   return chThdEnqueueTimeoutS(tqp, timeout);
 896:../../os/hal/osal/rt-nil/osal.h **** }
 897:../../os/hal/osal/rt-nil/osal.h **** 
 898:../../os/hal/osal/rt-nil/osal.h **** /**
 899:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Dequeues and wakes up one thread from the queue, if any.
 900:../../os/hal/osal/rt-nil/osal.h ****  *
 901:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] tqp       pointer to the threads queue object
 902:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 903:../../os/hal/osal/rt-nil/osal.h ****  *
 904:../../os/hal/osal/rt-nil/osal.h ****  * @iclass
 905:../../os/hal/osal/rt-nil/osal.h ****  */
 906:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadDequeueNextI(threads_queue_t *tqp, msg_t msg) {
 907:../../os/hal/osal/rt-nil/osal.h **** 
 908:../../os/hal/osal/rt-nil/osal.h ****   chThdDequeueNextI(tqp, msg);
 909:../../os/hal/osal/rt-nil/osal.h **** }
 910:../../os/hal/osal/rt-nil/osal.h **** 
 911:../../os/hal/osal/rt-nil/osal.h **** /**
 912:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Dequeues and wakes up all threads from the queue.
 913:../../os/hal/osal/rt-nil/osal.h ****  *
 914:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] tqp       pointer to the threads queue object
 915:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] msg       the message code
 916:../../os/hal/osal/rt-nil/osal.h ****  *
 917:../../os/hal/osal/rt-nil/osal.h ****  * @iclass
 918:../../os/hal/osal/rt-nil/osal.h ****  */
 919:../../os/hal/osal/rt-nil/osal.h **** static inline void osalThreadDequeueAllI(threads_queue_t *tqp, msg_t msg) {
 920:../../os/hal/osal/rt-nil/osal.h **** 
 921:../../os/hal/osal/rt-nil/osal.h ****   chThdDequeueAllI(tqp, msg);
 922:../../os/hal/osal/rt-nil/osal.h **** }
 923:../../os/hal/osal/rt-nil/osal.h **** 
 924:../../os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_USE_EVENTS == TRUE) || defined(__DOXYGEN__)
 925:../../os/hal/osal/rt-nil/osal.h **** /**
 926:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Initializes an event source object.
 927:../../os/hal/osal/rt-nil/osal.h ****  *
 928:../../os/hal/osal/rt-nil/osal.h ****  * @param[out] esp      pointer to the event source object
 929:../../os/hal/osal/rt-nil/osal.h ****  *
 930:../../os/hal/osal/rt-nil/osal.h ****  * @init
 931:../../os/hal/osal/rt-nil/osal.h ****  */
 932:../../os/hal/osal/rt-nil/osal.h **** static inline void osalEventObjectInit(event_source_t *esp) {
 933:../../os/hal/osal/rt-nil/osal.h **** 
 934:../../os/hal/osal/rt-nil/osal.h ****   chEvtObjectInit(esp);
 935:../../os/hal/osal/rt-nil/osal.h **** }
 936:../../os/hal/osal/rt-nil/osal.h **** #else
 937:../../os/hal/osal/rt-nil/osal.h **** static inline void osalEventObjectInit(event_source_t *esp) {
 938:../../os/hal/osal/rt-nil/osal.h **** 
 939:../../os/hal/osal/rt-nil/osal.h ****   osalDbgCheck(esp != NULL);
 940:../../os/hal/osal/rt-nil/osal.h **** 
 941:../../os/hal/osal/rt-nil/osal.h ****   esp->flags = (eventflags_t)0;
 942:../../os/hal/osal/rt-nil/osal.h ****   esp->cb    = NULL;
 943:../../os/hal/osal/rt-nil/osal.h ****   esp->param = NULL;
 944:../../os/hal/osal/rt-nil/osal.h **** }
 945:../../os/hal/osal/rt-nil/osal.h **** #endif
 946:../../os/hal/osal/rt-nil/osal.h **** 
 947:../../os/hal/osal/rt-nil/osal.h **** #if (CH_CFG_USE_EVENTS == TRUE) || defined(__DOXYGEN__)
 948:../../os/hal/osal/rt-nil/osal.h **** /**
 949:../../os/hal/osal/rt-nil/osal.h ****  * @brief   Add flags to an event source object.
 950:../../os/hal/osal/rt-nil/osal.h ****  *
 951:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] esp       pointer to the event flags object
 952:../../os/hal/osal/rt-nil/osal.h ****  * @param[in] flags     flags to be ORed to the flags mask
 953:../../os/hal/osal/rt-nil/osal.h ****  *
 954:../../os/hal/osal/rt-nil/osal.h ****  * @iclass
 955:../../os/hal/osal/rt-nil/osal.h ****  */
 956:../../os/hal/osal/rt-nil/osal.h **** static inline void osalEventBroadcastFlagsI(event_source_t *esp,
 200               		.loc 2 956 20 view .LVU44
 201               	.LBB31:
 957:../../os/hal/osal/rt-nil/osal.h ****                                             eventflags_t flags) {
 958:../../os/hal/osal/rt-nil/osal.h **** 
 959:../../os/hal/osal/rt-nil/osal.h ****   chEvtBroadcastFlagsI(esp, flags);
 202               		.loc 2 959 3 view .LVU45
 203 0078 80E0      		ldi r24,lo8(SD1+2)
 204 007a 90E0      		ldi r25,hi8(SD1+2)
 205               	.LVL9:
 206               		.loc 2 959 3 is_stmt 0 view .LVU46
 207 007c 0E94 0000 		call chEvtBroadcastFlagsI
 208               	.LVL10:
 209               		.loc 2 959 3 view .LVU47
 210               	.LBE31:
 211               	.LBE30:
 121:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 212               		.loc 1 121 25 is_stmt 1 discriminator 1 view .LVU48
 122:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 213               		.loc 1 122 3 view .LVU49
 123:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 214               		.loc 1 123 1 is_stmt 0 view .LVU50
 215 0080 00C0      		rjmp .L4
 216               	.L17:
 123:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 217               		.loc 1 123 1 view .LVU51
 218               	.LBE29:
 219               	.LBE28:
 269:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 220               		.loc 1 269 3 is_stmt 1 discriminator 1 view .LVU52
 221 0082 0E94 0000 		call chSchDoPreemption
 222               	.LVL11:
 269:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 223               		.loc 1 269 3 discriminator 3 view .LVU53
 269:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 224               		.loc 1 269 22 discriminator 3 view .LVU54
 225               		.loc 1 270 1 is_stmt 0 view .LVU55
 226 0086 00C0      		rjmp .L3
 227               		.cfi_endproc
 228               	.LFE150:
 230               		.section	.text.__vector_19,"ax",@progbits
 231               	.global	__vector_19
 233               	__vector_19:
 234               	.LFB151:
 271:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 272:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 273:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART0 TX interrupt handler.
 274:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 275:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @isr
 276:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 277:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** OSAL_IRQ_HANDLER(AVR_SD1_TX_VECT) {
 235               		.loc 1 277 35 is_stmt 1 view -0
 236               		.cfi_startproc
 237 0000 1F92      		push r1
 238               	.LCFI14:
 239               		.cfi_def_cfa_offset 3
 240               		.cfi_offset 1, -2
 241 0002 0F92      		push r0
 242               	.LCFI15:
 243               		.cfi_def_cfa_offset 4
 244               		.cfi_offset 0, -3
 245 0004 0FB6      		in r0,__SREG__
 246 0006 0F92      		push r0
 247 0008 1124      		clr __zero_reg__
 248 000a 2F93      		push r18
 249               	.LCFI16:
 250               		.cfi_def_cfa_offset 5
 251               		.cfi_offset 18, -4
 252 000c 3F93      		push r19
 253               	.LCFI17:
 254               		.cfi_def_cfa_offset 6
 255               		.cfi_offset 19, -5
 256 000e 4F93      		push r20
 257               	.LCFI18:
 258               		.cfi_def_cfa_offset 7
 259               		.cfi_offset 20, -6
 260 0010 5F93      		push r21
 261               	.LCFI19:
 262               		.cfi_def_cfa_offset 8
 263               		.cfi_offset 21, -7
 264 0012 6F93      		push r22
 265               	.LCFI20:
 266               		.cfi_def_cfa_offset 9
 267               		.cfi_offset 22, -8
 268 0014 7F93      		push r23
 269               	.LCFI21:
 270               		.cfi_def_cfa_offset 10
 271               		.cfi_offset 23, -9
 272 0016 8F93      		push r24
 273               	.LCFI22:
 274               		.cfi_def_cfa_offset 11
 275               		.cfi_offset 24, -10
 276 0018 9F93      		push r25
 277               	.LCFI23:
 278               		.cfi_def_cfa_offset 12
 279               		.cfi_offset 25, -11
 280 001a AF93      		push r26
 281               	.LCFI24:
 282               		.cfi_def_cfa_offset 13
 283               		.cfi_offset 26, -12
 284 001c BF93      		push r27
 285               	.LCFI25:
 286               		.cfi_def_cfa_offset 14
 287               		.cfi_offset 27, -13
 288 001e CF93      		push r28
 289               	.LCFI26:
 290               		.cfi_def_cfa_offset 15
 291               		.cfi_offset 28, -14
 292 0020 DF93      		push r29
 293               	.LCFI27:
 294               		.cfi_def_cfa_offset 16
 295               		.cfi_offset 29, -15
 296 0022 EF93      		push r30
 297               	.LCFI28:
 298               		.cfi_def_cfa_offset 17
 299               		.cfi_offset 30, -16
 300 0024 FF93      		push r31
 301               	.LCFI29:
 302               		.cfi_def_cfa_offset 18
 303               		.cfi_offset 31, -17
 304               	/* prologue: Signal */
 305               	/* frame size = 0 */
 306               	/* stack size = 17 */
 307               	.L__stack_usage = 17
 278:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   msg_t b;
 308               		.loc 1 278 3 view .LVU57
 279:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 280:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_PROLOGUE();
 309               		.loc 1 280 3 view .LVU58
 310               		.loc 1 280 3 view .LVU59
 311 0026 81E0      		ldi r24,lo8(1)
 312 0028 8093 0000 		sts __avr_in_isr,r24
 313               		.loc 1 280 3 view .LVU60
 314               		.loc 1 280 22 view .LVU61
 281:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 282:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 315               		.loc 1 282 3 view .LVU62
 283:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   b = sdRequestDataI(&SD1);
 316               		.loc 1 283 3 view .LVU63
 317               		.loc 1 283 7 is_stmt 0 view .LVU64
 318 002c 80E0      		ldi r24,lo8(SD1)
 319 002e 90E0      		ldi r25,hi8(SD1)
 320 0030 0E94 0000 		call sdRequestDataI
 321               	.LVL12:
 284:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 322               		.loc 1 284 3 is_stmt 1 view .LVU65
 285:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (b < MSG_OK)
 323               		.loc 1 285 3 view .LVU66
 324               		.loc 1 285 6 is_stmt 0 view .LVU67
 325 0034 97FD      		sbrc r25,7
 326 0036 00C0      		rjmp .L25
 286:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR0B &= ~(1 << UDRIE0);
 287:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   else
 288:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UDR0 = b;
 327               		.loc 1 288 5 is_stmt 1 view .LVU68
 328               		.loc 1 288 10 is_stmt 0 view .LVU69
 329 0038 8093 C600 		sts 198,r24
 289:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_EPILOGUE();
 330               		.loc 1 290 3 is_stmt 1 view .LVU70
 331               		.loc 1 290 3 view .LVU71
 332 003c 1092 0000 		sts __avr_in_isr,__zero_reg__
 333               		.loc 1 290 3 view .LVU72
 334               		.loc 1 290 3 view .LVU73
 335 0040 0E94 0000 		call chSchIsPreemptionRequired
 336               	.LVL13:
 337               		.loc 1 290 3 is_stmt 0 discriminator 1 view .LVU74
 338 0044 8115      		cp r24, __zero_reg__
 339 0046 01F4      		brne .L26
 340               	.L18:
 341               	/* epilogue start */
 291:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 342               		.loc 1 291 1 view .LVU75
 343 0048 FF91      		pop r31
 344 004a EF91      		pop r30
 345 004c DF91      		pop r29
 346 004e CF91      		pop r28
 347 0050 BF91      		pop r27
 348 0052 AF91      		pop r26
 349 0054 9F91      		pop r25
 350 0056 8F91      		pop r24
 351 0058 7F91      		pop r23
 352 005a 6F91      		pop r22
 353 005c 5F91      		pop r21
 354 005e 4F91      		pop r20
 355 0060 3F91      		pop r19
 356 0062 2F91      		pop r18
 357 0064 0F90      		pop r0
 358 0066 0FBE      		out __SREG__,r0
 359 0068 0F90      		pop r0
 360 006a 1F90      		pop r1
 361 006c 1895      		reti
 362               	.LVL14:
 363               	.L25:
 286:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR0B &= ~(1 << UDRIE0);
 364               		.loc 1 286 5 is_stmt 1 view .LVU76
 286:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR0B &= ~(1 << UDRIE0);
 365               		.loc 1 286 12 is_stmt 0 view .LVU77
 366 006e 8091 C100 		lds r24,193
 367               	.LVL15:
 286:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR0B &= ~(1 << UDRIE0);
 368               		.loc 1 286 12 view .LVU78
 369 0072 8F7D      		andi r24,lo8(-33)
 370 0074 8093 C100 		sts 193,r24
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 371               		.loc 1 290 3 is_stmt 1 view .LVU79
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 372               		.loc 1 290 3 view .LVU80
 373 0078 1092 0000 		sts __avr_in_isr,__zero_reg__
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 374               		.loc 1 290 3 view .LVU81
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 375               		.loc 1 290 3 view .LVU82
 376 007c 0E94 0000 		call chSchIsPreemptionRequired
 377               	.LVL16:
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 378               		.loc 1 290 3 is_stmt 0 discriminator 1 view .LVU83
 379 0080 8115      		cp r24, __zero_reg__
 380 0082 01F0      		breq .L18
 381               	.L26:
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 382               		.loc 1 290 3 is_stmt 1 discriminator 1 view .LVU84
 383 0084 0E94 0000 		call chSchDoPreemption
 384               	.LVL17:
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 385               		.loc 1 290 3 discriminator 3 view .LVU85
 290:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 386               		.loc 1 290 22 discriminator 3 view .LVU86
 387               		.loc 1 291 1 is_stmt 0 view .LVU87
 388 0088 00C0      		rjmp .L18
 389               		.cfi_endproc
 390               	.LFE151:
 392               		.section	.text.sd_lld_init,"ax",@progbits
 393               	.global	sd_lld_init
 395               	sd_lld_init:
 396               	.LFB152:
 292:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif /* AVR_SERIAL_USE_USART0 */
 293:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 294:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1 || defined(__DOXYGEN__)
 295:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 296:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART1 RX interrupt handler.
 297:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 298:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @isr
 299:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 300:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** OSAL_IRQ_HANDLER(AVR_SD2_RX_VECT) {
 301:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   uint8_t sra;
 302:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 303:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_PROLOGUE();
 304:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 305:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sra = UCSR1A;
 306:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (sra & ((1 << DOR1) | (1 << UPE1) | (1 << FE1)))
 307:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     set_error(sra, &SD2);
 308:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 309:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sdIncomingDataI(&SD2, UDR1);
 310:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 311:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 312:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_EPILOGUE();
 313:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 314:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 315:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 316:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   USART1 TX interrupt handler.
 317:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 318:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @isr
 319:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 320:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** OSAL_IRQ_HANDLER(AVR_SD2_TX_VECT) {
 321:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   msg_t b;
 322:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 323:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_PROLOGUE();
 324:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 325:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysLockFromISR();
 326:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   b = sdRequestDataI(&SD2);
 327:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   osalSysUnlockFromISR();
 328:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (b < MSG_OK)
 329:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UCSR1B &= ~(1 << UDRIE1);
 330:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   else
 331:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     UDR1 = b;
 332:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 333:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   OSAL_IRQ_EPILOGUE();
 334:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 335:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif /* AVR_SERIAL_USE_USART1 */
 336:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 337:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
 338:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /* Driver exported functions.                                               */
 339:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /*==========================================================================*/
 340:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 341:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 342:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   Low level serial driver initialization.
 343:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 344:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @notapi
 345:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 346:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** void sd_lld_init(void) {
 397               		.loc 1 346 24 is_stmt 1 view -0
 398               		.cfi_startproc
 399               	/* prologue: function */
 400               	/* frame size = 0 */
 401               	/* stack size = 0 */
 402               	.L__stack_usage = 0
 347:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 348:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0
 349:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sdObjectInit(&SD1, NULL, notify1);
 403               		.loc 1 349 3 view .LVU89
 404 0000 40E0      		ldi r20,lo8(gs(notify1))
 405 0002 50E0      		ldi r21,hi8(gs(notify1))
 406 0004 60E0      		ldi r22,0
 407 0006 70E0      		ldi r23,0
 408 0008 80E0      		ldi r24,lo8(SD1)
 409 000a 90E0      		ldi r25,hi8(SD1)
 410 000c 0C94 0000 		jmp sdObjectInit
 411               	.LVL18:
 412               		.cfi_endproc
 413               	.LFE152:
 415               		.section	.text.sd_lld_start,"ax",@progbits
 416               	.global	sd_lld_start
 418               	sd_lld_start:
 419               	.LVL19:
 420               	.LFB153:
 350:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 351:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1
 352:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   sdObjectInit(&SD2, NULL, notify2);
 353:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 354:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 355:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 356:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 357:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   Low level serial driver configuration and (re)start.
 358:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 359:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @param[in] sdp       pointer to a @p SerialDriver object
 360:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @param[in] config    the architecture-dependent serial driver configuration.
 361:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *                      If this parameter is set to @p NULL then a default
 362:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *                      configuration is used.
 363:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 364:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @notapi
 365:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 366:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** void sd_lld_start(SerialDriver *sdp, const SerialConfig *config) {
 421               		.loc 1 366 66 view -0
 422               		.cfi_startproc
 423               	/* prologue: function */
 424               	/* frame size = 0 */
 425               	/* stack size = 0 */
 426               	.L__stack_usage = 0
 427               		.loc 1 366 66 is_stmt 0 view .LVU91
 428 0000 9C01      		movw r18,r24
 429 0002 FB01      		movw r30,r22
 367:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 368:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (config == NULL)
 430               		.loc 1 368 3 is_stmt 1 view .LVU92
 431               		.loc 1 368 6 is_stmt 0 view .LVU93
 432 0004 3097      		sbiw r30,0
 433 0006 01F0      		breq .L29
 369:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     config = &default_config;
 370:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 371:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0
 372:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD1 == sdp) {
 434               		.loc 1 372 3 is_stmt 1 view .LVU94
 435               		.loc 1 372 6 is_stmt 0 view .LVU95
 436 0008 2050      		subi r18,lo8(SD1)
 437 000a 3040      		sbci r19,hi8(SD1)
 438               	.LVL20:
 439               		.loc 1 372 6 view .LVU96
 440 000c 01F0      		breq .L39
 441               	.LVL21:
 442               	.L28:
 443               	/* epilogue start */
 373:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_init(config);
 374:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     return;
 375:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 376:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 377:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1
 378:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD2 == sdp) {
 379:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart1_init(config);
 380:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     return;
 381:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 382:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 383:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 444               		.loc 1 383 1 view .LVU97
 445 000e 0895      		ret
 446               	.LVL22:
 447               	.L29:
 369:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     config = &default_config;
 448               		.loc 1 369 5 is_stmt 1 view .LVU98
 372:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_init(config);
 449               		.loc 1 372 3 view .LVU99
 372:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_init(config);
 450               		.loc 1 372 6 is_stmt 0 view .LVU100
 451 0010 2050      		subi r18,lo8(SD1)
 452 0012 3040      		sbci r19,hi8(SD1)
 453 0014 01F4      		brne .L28
 373:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_init(config);
 454               		.loc 1 373 5 is_stmt 1 view .LVU101
 455               	.LVL23:
 456               	.LBB34:
 457               	.LBI34:
 137:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 458               		.loc 1 137 13 view .LVU102
 459               	.LBB35:
 139:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 460               		.loc 1 139 3 view .LVU103
 141:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0H = (config->sc_brr >> 8) & 0x0f;
 461               		.loc 1 141 3 view .LVU104
 141:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0H = (config->sc_brr >> 8) & 0x0f;
 462               		.loc 1 141 10 is_stmt 0 view .LVU105
 463 0016 83E3      		ldi r24,lo8(51)
 464 0018 8093 C400 		sts 196,r24
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 465               		.loc 1 142 3 is_stmt 1 view .LVU106
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 466               		.loc 1 142 10 is_stmt 0 view .LVU107
 467 001c 1092 C500 		sts 197,__zero_reg__
 143:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = (1 << RXEN0) | (1 << TXEN0) | (1 << RXCIE0);
 468               		.loc 1 143 3 is_stmt 1 view .LVU108
 143:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = (1 << RXEN0) | (1 << TXEN0) | (1 << RXCIE0);
 469               		.loc 1 143 10 is_stmt 0 view .LVU109
 470 0020 82E0      		ldi r24,lo8(2)
 471 0022 8093 C000 		sts 192,r24
 144:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 472               		.loc 1 144 3 is_stmt 1 view .LVU110
 144:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 473               		.loc 1 144 10 is_stmt 0 view .LVU111
 474 0026 88E9      		ldi r24,lo8(-104)
 475 0028 8093 C100 		sts 193,r24
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 476               		.loc 1 145 3 is_stmt 1 view .LVU112
 477               	.LVL24:
 478               	.L33:
 157:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 479               		.loc 1 157 12 is_stmt 0 view .LVU113
 480 002c 86E0      		ldi r24,lo8(6)
 481               	.L31:
 482               	.LVL25:
 167:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 483               		.loc 1 167 3 is_stmt 1 view .LVU114
 167:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 484               		.loc 1 167 10 is_stmt 0 view .LVU115
 485 002e 8093 C200 		sts 194,r24
 486               	.LVL26:
 167:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 487               		.loc 1 167 10 view .LVU116
 488               	.LBE35:
 489               	.LBE34:
 374:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   }
 490               		.loc 1 374 5 is_stmt 1 view .LVU117
 491               	.LBB38:
 492               	.LBB36:
 169:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 493               		.loc 1 169 1 is_stmt 0 view .LVU118
 494 0032 0895      		ret
 495               	.LVL27:
 496               	.L39:
 169:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 497               		.loc 1 169 1 view .LVU119
 498               	.LBE36:
 499               	.LBE38:
 373:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     return;
 500               		.loc 1 373 5 is_stmt 1 view .LVU120
 501               	.LBB39:
 137:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 502               		.loc 1 137 13 view .LVU121
 503               	.LBB37:
 139:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 504               		.loc 1 139 3 view .LVU122
 141:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0H = (config->sc_brr >> 8) & 0x0f;
 505               		.loc 1 141 3 view .LVU123
 141:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UBRR0H = (config->sc_brr >> 8) & 0x0f;
 506               		.loc 1 141 10 is_stmt 0 view .LVU124
 507 0034 8081      		ld r24,Z
 508 0036 8093 C400 		sts 196,r24
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 509               		.loc 1 142 3 is_stmt 1 view .LVU125
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 510               		.loc 1 142 28 is_stmt 0 view .LVU126
 511 003a 8181      		ldd r24,Z+1
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 512               		.loc 1 142 34 view .LVU127
 513 003c 8F70      		andi r24,lo8(15)
 142:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0A = (1 << U2X0);
 514               		.loc 1 142 10 view .LVU128
 515 003e 8093 C500 		sts 197,r24
 143:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = (1 << RXEN0) | (1 << TXEN0) | (1 << RXCIE0);
 516               		.loc 1 143 3 is_stmt 1 view .LVU129
 143:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = (1 << RXEN0) | (1 << TXEN0) | (1 << RXCIE0);
 517               		.loc 1 143 10 is_stmt 0 view .LVU130
 518 0042 82E0      		ldi r24,lo8(2)
 519 0044 8093 C000 		sts 192,r24
 144:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 520               		.loc 1 144 3 is_stmt 1 view .LVU131
 144:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   switch (config->sc_bits_per_char) {
 521               		.loc 1 144 10 is_stmt 0 view .LVU132
 522 0048 88E9      		ldi r24,lo8(-104)
 523 004a 8093 C100 		sts 193,r24
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 524               		.loc 1 145 3 is_stmt 1 view .LVU133
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 525               		.loc 1 145 17 is_stmt 0 view .LVU134
 526 004e 8281      		ldd r24,Z+2
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 527               		.loc 1 145 3 view .LVU135
 528 0050 8130      		cpi r24,lo8(1)
 529 0052 01F0      		breq .L36
 530 0054 00F0      		brlo .L37
 531 0056 8230      		cpi r24,lo8(2)
 532 0058 01F0      		breq .L38
 533 005a 8430      		cpi r24,lo8(4)
 534 005c 01F4      		brne .L33
 156:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ00) | (1 << UCSZ01);
 535               		.loc 1 156 5 is_stmt 1 view .LVU136
 536 005e 8091 C100 		lds r24,193
 156:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     ucsr0c = (1 << UCSZ00) | (1 << UCSZ01);
 537               		.loc 1 156 12 is_stmt 0 view .LVU137
 538 0062 8460      		ori r24,lo8(4)
 539 0064 8093 C100 		sts 193,r24
 157:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 540               		.loc 1 157 5 is_stmt 1 view .LVU138
 541               	.LVL28:
 158:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_8:
 542               		.loc 1 158 5 view .LVU139
 543 0068 00C0      		rjmp .L33
 544               	.LVL29:
 545               	.L37:
 147:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 546               		.loc 1 147 12 is_stmt 0 view .LVU140
 547 006a 80E0      		ldi r24,0
 548 006c 00C0      		rjmp .L31
 549               	.L38:
 153:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     break;
 550               		.loc 1 153 12 view .LVU141
 551 006e 84E0      		ldi r24,lo8(4)
 552 0070 00C0      		rjmp .L31
 553               	.L36:
 145:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   case USART_CHAR_SIZE_5:
 554               		.loc 1 145 3 view .LVU142
 555 0072 82E0      		ldi r24,lo8(2)
 556 0074 00C0      		rjmp .L31
 557               	.LBE37:
 558               	.LBE39:
 559               		.cfi_endproc
 560               	.LFE153:
 562               		.section	.text.sd_lld_stop,"ax",@progbits
 563               	.global	sd_lld_stop
 565               	sd_lld_stop:
 566               	.LVL30:
 567               	.LFB154:
 384:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 385:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** /**
 386:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @brief   Low level serial driver stop.
 387:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @details De-initializes the USART, stops the associated clock, resets the
 388:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *          interrupt vector.
 389:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 390:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @param[in] sdp       pointer to a @p SerialDriver object
 391:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  *
 392:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  * @notapi
 393:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****  */
 394:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** void sd_lld_stop(SerialDriver *sdp) {
 568               		.loc 1 394 37 is_stmt 1 view -0
 569               		.cfi_startproc
 570               	/* prologue: function */
 571               	/* frame size = 0 */
 572               	/* stack size = 0 */
 573               	.L__stack_usage = 0
 395:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 396:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART0
 397:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD1 == sdp)
 574               		.loc 1 397 3 view .LVU144
 575               		.loc 1 397 6 is_stmt 0 view .LVU145
 576 0000 8050      		subi r24,lo8(SD1)
 577 0002 9040      		sbci r25,hi8(SD1)
 578 0004 01F0      		breq .L42
 579               	/* epilogue start */
 398:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_deinit();
 399:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 400:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if AVR_SERIAL_USE_USART1
 401:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   if (&SD2 == sdp)
 402:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart1_deinit();
 403:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 404:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** }
 580               		.loc 1 404 1 view .LVU146
 581 0006 0895      		ret
 582               	.L42:
 398:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****     usart0_deinit();
 583               		.loc 1 398 5 is_stmt 1 view .LVU147
 584               	.LBB40:
 585               	.LBI40:
 174:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** 
 586               		.loc 1 174 13 view .LVU148
 587               	.LBB41:
 176:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = 0;
 588               		.loc 1 176 3 view .LVU149
 176:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c ****   UCSR0B = 0;
 589               		.loc 1 176 10 is_stmt 0 view .LVU150
 590 0008 1092 C000 		sts 192,__zero_reg__
 177:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 591               		.loc 1 177 3 is_stmt 1 view .LVU151
 177:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #if defined(__AVR_ATmega162__)
 592               		.loc 1 177 10 is_stmt 0 view .LVU152
 593 000c 1092 C100 		sts 193,__zero_reg__
 181:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 594               		.loc 1 181 3 is_stmt 1 view .LVU153
 181:../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.c **** #endif
 595               		.loc 1 181 10 is_stmt 0 view .LVU154
 596 0010 1092 C200 		sts 194,__zero_reg__
 597               	/* epilogue start */
 598               	.LBE41:
 599               	.LBE40:
 600               		.loc 1 404 1 view .LVU155
 601 0014 0895      		ret
 602               		.cfi_endproc
 603               	.LFE154:
 605               	.global	SD1
 606               		.section	.bss.SD1,"aw",@nobits
 609               	SD1:
 610 0000 0000 0000 		.zero	67
 610      0000 0000 
 610      0000 0000 
 610      0000 0000 
 610      0000 0000 
 611               		.text
 612               	.Letext0:
 613               		.file 3 "/usr/lib/gcc/avr/14.1.0/include/stddef.h"
 614               		.file 4 "/usr/avr/include/stdint.h"
 615               		.file 5 "../../os/common/ports/AVR/compilers/GCC/chtypes.h"
 616               		.file 6 "../../os/nil/include/ch.h"
 617               		.file 7 "../../os/common/ports/AVR/chcore.h"
 618               		.file 8 "../../os/nil/include/chevt.h"
 619               		.file 9 "../../os/hal/include/hal_queues.h"
 620               		.file 10 "../../os/hal/include/hal_serial.h"
 621               		.file 11 "../../os/hal/ports/AVR/MEGA/LLD/USARTv1/hal_serial_lld.h"
DEFINED SYMBOLS
                            *ABS*:00000000 hal_serial_lld.c
     /tmp/ccEMvDYT.s:2      *ABS*:0000003e __SP_H__
     /tmp/ccEMvDYT.s:3      *ABS*:0000003d __SP_L__
     /tmp/ccEMvDYT.s:4      *ABS*:0000003f __SREG__
     /tmp/ccEMvDYT.s:5      *ABS*:00000000 __tmp_reg__
     /tmp/ccEMvDYT.s:6      *ABS*:00000001 __zero_reg__
     /tmp/ccEMvDYT.s:13     .text.notify1:00000000 notify1
     /tmp/ccEMvDYT.s:16     .text.notify1:00000000 .Loc.0
     /tmp/ccEMvDYT.s:17     .text.notify1:00000000 L0
     /tmp/ccEMvDYT.s:22     .text.notify1:00000000 .Loc.1
     /tmp/ccEMvDYT.s:23     .text.notify1:00000000 .Loc.2
     /tmp/ccEMvDYT.s:28     .text.notify1:00000006 .Loc.3
     /tmp/ccEMvDYT.s:32     .text.notify1:0000000a .Loc.4
     /tmp/ccEMvDYT.s:34     .text.notify1:0000000c L0
     /tmp/ccEMvDYT.s:40     .text.__vector_18:00000000 __vector_18
     /tmp/ccEMvDYT.s:42     .text.__vector_18:00000000 .Loc.5
     /tmp/ccEMvDYT.s:43     .text.__vector_18:00000000 L0
     /tmp/ccEMvDYT.s:107    .text.__vector_18:00000022 .Loc.6
     /tmp/ccEMvDYT.s:108    .text.__vector_18:00000022 .Loc.7
     /tmp/ccEMvDYT.s:109    .text.__vector_18:00000022 .Loc.8
     /tmp/ccEMvDYT.s:112    .text.__vector_18:00000028 .Loc.9
     /tmp/ccEMvDYT.s:113    .text.__vector_18:00000028 .Loc.10
     /tmp/ccEMvDYT.s:114    .text.__vector_18:00000028 .Loc.11
     /tmp/ccEMvDYT.s:115    .text.__vector_18:00000028 .Loc.12
     /tmp/ccEMvDYT.s:118    .text.__vector_18:0000002c .Loc.13
     /tmp/ccEMvDYT.s:119    .text.__vector_18:0000002c .Loc.14
     /tmp/ccEMvDYT.s:126    .text.__vector_18:00000034 .Loc.15
     /tmp/ccEMvDYT.s:127    .text.__vector_18:00000034 .Loc.16
     /tmp/ccEMvDYT.s:609    .bss.SD1:00000000 SD1
     /tmp/ccEMvDYT.s:133    .text.__vector_18:00000040 .Loc.17
     /tmp/ccEMvDYT.s:134    .text.__vector_18:00000040 .Loc.18
     /tmp/ccEMvDYT.s:135    .text.__vector_18:00000040 .Loc.19
     /tmp/ccEMvDYT.s:137    .text.__vector_18:00000044 .Loc.20
     /tmp/ccEMvDYT.s:138    .text.__vector_18:00000044 .Loc.21
     /tmp/ccEMvDYT.s:141    .text.__vector_18:00000048 .Loc.22
     /tmp/ccEMvDYT.s:146    .text.__vector_18:0000004c .Loc.23
     /tmp/ccEMvDYT.s:166    .text.__vector_18:0000006e .Loc.24
     /tmp/ccEMvDYT.s:169    .text.__vector_18:0000006e .Loc.25
     /tmp/ccEMvDYT.s:171    .text.__vector_18:0000006e .Loc.26
     /tmp/ccEMvDYT.s:172    .text.__vector_18:0000006e .Loc.27
     /tmp/ccEMvDYT.s:173    .text.__vector_18:0000006e .Loc.28
     /tmp/ccEMvDYT.s:174    .text.__vector_18:0000006e .Loc.29
     /tmp/ccEMvDYT.s:175    .text.__vector_18:0000006e .Loc.30
     /tmp/ccEMvDYT.s:176    .text.__vector_18:0000006e .Loc.31
     /tmp/ccEMvDYT.s:177    .text.__vector_18:0000006e .Loc.32
     /tmp/ccEMvDYT.s:178    .text.__vector_18:0000006e .Loc.33
     /tmp/ccEMvDYT.s:179    .text.__vector_18:0000006e .Loc.34
     /tmp/ccEMvDYT.s:180    .text.__vector_18:0000006e .Loc.35
     /tmp/ccEMvDYT.s:181    .text.__vector_18:0000006e .Loc.36
     /tmp/ccEMvDYT.s:182    .text.__vector_18:0000006e .Loc.37
     /tmp/ccEMvDYT.s:187    .text.__vector_18:00000074 .Loc.38
     /tmp/ccEMvDYT.s:188    .text.__vector_18:00000074 .Loc.39
     /tmp/ccEMvDYT.s:190    .text.__vector_18:00000076 .Loc.40
     /tmp/ccEMvDYT.s:191    .text.__vector_18:00000076 .Loc.41
     /tmp/ccEMvDYT.s:195    .text.__vector_18:00000078 .Loc.42
     /tmp/ccEMvDYT.s:196    .text.__vector_18:00000078 .Loc.43
     /tmp/ccEMvDYT.s:200    .text.__vector_18:00000078 .Loc.44
     /tmp/ccEMvDYT.s:202    .text.__vector_18:00000078 .Loc.45
     /tmp/ccEMvDYT.s:206    .text.__vector_18:0000007c .Loc.46
     /tmp/ccEMvDYT.s:209    .text.__vector_18:00000080 .Loc.47
     /tmp/ccEMvDYT.s:212    .text.__vector_18:00000080 .Loc.48
     /tmp/ccEMvDYT.s:213    .text.__vector_18:00000080 .Loc.49
     /tmp/ccEMvDYT.s:214    .text.__vector_18:00000080 .Loc.50
     /tmp/ccEMvDYT.s:217    .text.__vector_18:00000082 .Loc.51
     /tmp/ccEMvDYT.s:220    .text.__vector_18:00000082 .Loc.52
     /tmp/ccEMvDYT.s:223    .text.__vector_18:00000086 .Loc.53
     /tmp/ccEMvDYT.s:224    .text.__vector_18:00000086 .Loc.54
     /tmp/ccEMvDYT.s:225    .text.__vector_18:00000086 .Loc.55
     /tmp/ccEMvDYT.s:227    .text.__vector_18:00000088 L0
     /tmp/ccEMvDYT.s:233    .text.__vector_19:00000000 __vector_19
     /tmp/ccEMvDYT.s:235    .text.__vector_19:00000000 .Loc.56
     /tmp/ccEMvDYT.s:236    .text.__vector_19:00000000 L0
     /tmp/ccEMvDYT.s:308    .text.__vector_19:00000026 .Loc.57
     /tmp/ccEMvDYT.s:309    .text.__vector_19:00000026 .Loc.58
     /tmp/ccEMvDYT.s:310    .text.__vector_19:00000026 .Loc.59
     /tmp/ccEMvDYT.s:313    .text.__vector_19:0000002c .Loc.60
     /tmp/ccEMvDYT.s:314    .text.__vector_19:0000002c .Loc.61
     /tmp/ccEMvDYT.s:315    .text.__vector_19:0000002c .Loc.62
     /tmp/ccEMvDYT.s:316    .text.__vector_19:0000002c .Loc.63
     /tmp/ccEMvDYT.s:317    .text.__vector_19:0000002c .Loc.64
     /tmp/ccEMvDYT.s:322    .text.__vector_19:00000034 .Loc.65
     /tmp/ccEMvDYT.s:323    .text.__vector_19:00000034 .Loc.66
     /tmp/ccEMvDYT.s:324    .text.__vector_19:00000034 .Loc.67
     /tmp/ccEMvDYT.s:327    .text.__vector_19:00000038 .Loc.68
     /tmp/ccEMvDYT.s:328    .text.__vector_19:00000038 .Loc.69
     /tmp/ccEMvDYT.s:330    .text.__vector_19:0000003c .Loc.70
     /tmp/ccEMvDYT.s:331    .text.__vector_19:0000003c .Loc.71
     /tmp/ccEMvDYT.s:333    .text.__vector_19:00000040 .Loc.72
     /tmp/ccEMvDYT.s:334    .text.__vector_19:00000040 .Loc.73
     /tmp/ccEMvDYT.s:337    .text.__vector_19:00000044 .Loc.74
     /tmp/ccEMvDYT.s:342    .text.__vector_19:00000048 .Loc.75
     /tmp/ccEMvDYT.s:364    .text.__vector_19:0000006e .Loc.76
     /tmp/ccEMvDYT.s:365    .text.__vector_19:0000006e .Loc.77
     /tmp/ccEMvDYT.s:368    .text.__vector_19:00000072 .Loc.78
     /tmp/ccEMvDYT.s:371    .text.__vector_19:00000078 .Loc.79
     /tmp/ccEMvDYT.s:372    .text.__vector_19:00000078 .Loc.80
     /tmp/ccEMvDYT.s:374    .text.__vector_19:0000007c .Loc.81
     /tmp/ccEMvDYT.s:375    .text.__vector_19:0000007c .Loc.82
     /tmp/ccEMvDYT.s:378    .text.__vector_19:00000080 .Loc.83
     /tmp/ccEMvDYT.s:382    .text.__vector_19:00000084 .Loc.84
     /tmp/ccEMvDYT.s:385    .text.__vector_19:00000088 .Loc.85
     /tmp/ccEMvDYT.s:386    .text.__vector_19:00000088 .Loc.86
     /tmp/ccEMvDYT.s:387    .text.__vector_19:00000088 .Loc.87
     /tmp/ccEMvDYT.s:389    .text.__vector_19:0000008a L0
     /tmp/ccEMvDYT.s:395    .text.sd_lld_init:00000000 sd_lld_init
     /tmp/ccEMvDYT.s:397    .text.sd_lld_init:00000000 .Loc.88
     /tmp/ccEMvDYT.s:398    .text.sd_lld_init:00000000 L0
     /tmp/ccEMvDYT.s:403    .text.sd_lld_init:00000000 .Loc.89
     /tmp/ccEMvDYT.s:412    .text.sd_lld_init:00000010 L0
     /tmp/ccEMvDYT.s:418    .text.sd_lld_start:00000000 sd_lld_start
     /tmp/ccEMvDYT.s:421    .text.sd_lld_start:00000000 .Loc.90
     /tmp/ccEMvDYT.s:422    .text.sd_lld_start:00000000 L0
     /tmp/ccEMvDYT.s:427    .text.sd_lld_start:00000000 .Loc.91
     /tmp/ccEMvDYT.s:430    .text.sd_lld_start:00000004 .Loc.92
     /tmp/ccEMvDYT.s:431    .text.sd_lld_start:00000004 .Loc.93
     /tmp/ccEMvDYT.s:434    .text.sd_lld_start:00000008 .Loc.94
     /tmp/ccEMvDYT.s:435    .text.sd_lld_start:00000008 .Loc.95
     /tmp/ccEMvDYT.s:439    .text.sd_lld_start:0000000c .Loc.96
     /tmp/ccEMvDYT.s:444    .text.sd_lld_start:0000000e .Loc.97
     /tmp/ccEMvDYT.s:448    .text.sd_lld_start:00000010 .Loc.98
     /tmp/ccEMvDYT.s:449    .text.sd_lld_start:00000010 .Loc.99
     /tmp/ccEMvDYT.s:450    .text.sd_lld_start:00000010 .Loc.100
     /tmp/ccEMvDYT.s:454    .text.sd_lld_start:00000016 .Loc.101
     /tmp/ccEMvDYT.s:458    .text.sd_lld_start:00000016 .Loc.102
     /tmp/ccEMvDYT.s:460    .text.sd_lld_start:00000016 .Loc.103
     /tmp/ccEMvDYT.s:461    .text.sd_lld_start:00000016 .Loc.104
     /tmp/ccEMvDYT.s:462    .text.sd_lld_start:00000016 .Loc.105
     /tmp/ccEMvDYT.s:465    .text.sd_lld_start:0000001c .Loc.106
     /tmp/ccEMvDYT.s:466    .text.sd_lld_start:0000001c .Loc.107
     /tmp/ccEMvDYT.s:468    .text.sd_lld_start:00000020 .Loc.108
     /tmp/ccEMvDYT.s:469    .text.sd_lld_start:00000020 .Loc.109
     /tmp/ccEMvDYT.s:472    .text.sd_lld_start:00000026 .Loc.110
     /tmp/ccEMvDYT.s:473    .text.sd_lld_start:00000026 .Loc.111
     /tmp/ccEMvDYT.s:476    .text.sd_lld_start:0000002c .Loc.112
     /tmp/ccEMvDYT.s:479    .text.sd_lld_start:0000002c .Loc.113
     /tmp/ccEMvDYT.s:483    .text.sd_lld_start:0000002e .Loc.114
     /tmp/ccEMvDYT.s:484    .text.sd_lld_start:0000002e .Loc.115
     /tmp/ccEMvDYT.s:487    .text.sd_lld_start:00000032 .Loc.116
     /tmp/ccEMvDYT.s:490    .text.sd_lld_start:00000032 .Loc.117
     /tmp/ccEMvDYT.s:493    .text.sd_lld_start:00000032 .Loc.118
     /tmp/ccEMvDYT.s:497    .text.sd_lld_start:00000034 .Loc.119
     /tmp/ccEMvDYT.s:500    .text.sd_lld_start:00000034 .Loc.120
     /tmp/ccEMvDYT.s:502    .text.sd_lld_start:00000034 .Loc.121
     /tmp/ccEMvDYT.s:504    .text.sd_lld_start:00000034 .Loc.122
     /tmp/ccEMvDYT.s:505    .text.sd_lld_start:00000034 .Loc.123
     /tmp/ccEMvDYT.s:506    .text.sd_lld_start:00000034 .Loc.124
     /tmp/ccEMvDYT.s:509    .text.sd_lld_start:0000003a .Loc.125
     /tmp/ccEMvDYT.s:510    .text.sd_lld_start:0000003a .Loc.126
     /tmp/ccEMvDYT.s:512    .text.sd_lld_start:0000003c .Loc.127
     /tmp/ccEMvDYT.s:514    .text.sd_lld_start:0000003e .Loc.128
     /tmp/ccEMvDYT.s:516    .text.sd_lld_start:00000042 .Loc.129
     /tmp/ccEMvDYT.s:517    .text.sd_lld_start:00000042 .Loc.130
     /tmp/ccEMvDYT.s:520    .text.sd_lld_start:00000048 .Loc.131
     /tmp/ccEMvDYT.s:521    .text.sd_lld_start:00000048 .Loc.132
     /tmp/ccEMvDYT.s:524    .text.sd_lld_start:0000004e .Loc.133
     /tmp/ccEMvDYT.s:525    .text.sd_lld_start:0000004e .Loc.134
     /tmp/ccEMvDYT.s:527    .text.sd_lld_start:00000050 .Loc.135
     /tmp/ccEMvDYT.s:535    .text.sd_lld_start:0000005e .Loc.136
     /tmp/ccEMvDYT.s:537    .text.sd_lld_start:00000062 .Loc.137
     /tmp/ccEMvDYT.s:540    .text.sd_lld_start:00000068 .Loc.138
     /tmp/ccEMvDYT.s:542    .text.sd_lld_start:00000068 .Loc.139
     /tmp/ccEMvDYT.s:546    .text.sd_lld_start:0000006a .Loc.140
     /tmp/ccEMvDYT.s:550    .text.sd_lld_start:0000006e .Loc.141
     /tmp/ccEMvDYT.s:554    .text.sd_lld_start:00000072 .Loc.142
     /tmp/ccEMvDYT.s:559    .text.sd_lld_start:00000076 L0
     /tmp/ccEMvDYT.s:565    .text.sd_lld_stop:00000000 sd_lld_stop
     /tmp/ccEMvDYT.s:568    .text.sd_lld_stop:00000000 .Loc.143
     /tmp/ccEMvDYT.s:569    .text.sd_lld_stop:00000000 L0
     /tmp/ccEMvDYT.s:574    .text.sd_lld_stop:00000000 .Loc.144
     /tmp/ccEMvDYT.s:575    .text.sd_lld_stop:00000000 .Loc.145
     /tmp/ccEMvDYT.s:580    .text.sd_lld_stop:00000006 .Loc.146
     /tmp/ccEMvDYT.s:583    .text.sd_lld_stop:00000008 .Loc.147
     /tmp/ccEMvDYT.s:586    .text.sd_lld_stop:00000008 .Loc.148
     /tmp/ccEMvDYT.s:588    .text.sd_lld_stop:00000008 .Loc.149
     /tmp/ccEMvDYT.s:589    .text.sd_lld_stop:00000008 .Loc.150
     /tmp/ccEMvDYT.s:591    .text.sd_lld_stop:0000000c .Loc.151
     /tmp/ccEMvDYT.s:592    .text.sd_lld_stop:0000000c .Loc.152
     /tmp/ccEMvDYT.s:594    .text.sd_lld_stop:00000010 .Loc.153
     /tmp/ccEMvDYT.s:595    .text.sd_lld_stop:00000010 .Loc.154
     /tmp/ccEMvDYT.s:600    .text.sd_lld_stop:00000014 .Loc.155
     /tmp/ccEMvDYT.s:602    .text.sd_lld_stop:00000016 L0
     /tmp/ccEMvDYT.s:37     .text.notify1:0000000c L0
     /tmp/ccEMvDYT.s:230    .text.__vector_18:00000088 L0
     /tmp/ccEMvDYT.s:392    .text.__vector_19:0000008a L0
     /tmp/ccEMvDYT.s:415    .text.sd_lld_init:00000010 L0
     /tmp/ccEMvDYT.s:562    .text.sd_lld_start:00000076 L0
     /tmp/ccEMvDYT.s:606    .text.sd_lld_stop:00000016 L0
                     .debug_frame:00000000 L0
     /tmp/ccEMvDYT.s:165    .text.__vector_18:0000006e .L16
     /tmp/ccEMvDYT.s:216    .text.__vector_18:00000082 .L17
     /tmp/ccEMvDYT.s:125    .text.__vector_18:00000034 .L4
     /tmp/ccEMvDYT.s:144    .text.__vector_18:0000004c .L3
     /tmp/ccEMvDYT.s:363    .text.__vector_19:0000006e .L25
     /tmp/ccEMvDYT.s:381    .text.__vector_19:00000084 .L26
     /tmp/ccEMvDYT.s:340    .text.__vector_19:00000048 .L18
     /tmp/ccEMvDYT.s:447    .text.sd_lld_start:00000010 .L29
     /tmp/ccEMvDYT.s:496    .text.sd_lld_start:00000034 .L39
     /tmp/ccEMvDYT.s:442    .text.sd_lld_start:0000000e .L28
     /tmp/ccEMvDYT.s:553    .text.sd_lld_start:00000072 .L36
     /tmp/ccEMvDYT.s:545    .text.sd_lld_start:0000006a .L37
     /tmp/ccEMvDYT.s:549    .text.sd_lld_start:0000006e .L38
     /tmp/ccEMvDYT.s:478    .text.sd_lld_start:0000002c .L33
     /tmp/ccEMvDYT.s:481    .text.sd_lld_start:0000002e .L31
     /tmp/ccEMvDYT.s:582    .text.sd_lld_stop:00000008 .L42
     /tmp/ccEMvDYT.s:2351   .debug_abbrev:00000000 .Ldebug_abbrev0
     /tmp/ccEMvDYT.s:3812   .debug_ranges:00000000 .Ldebug_ranges0
     /tmp/ccEMvDYT.s:3836   .debug_line:00000000 .Ldebug_line0
     /tmp/ccEMvDYT.s:567    .text.sd_lld_stop:00000000 .LFB154
     /tmp/ccEMvDYT.s:603    .text.sd_lld_stop:00000016 .LFE154
     /tmp/ccEMvDYT.s:585    .text.sd_lld_stop:00000008 .LBI40
     /tmp/ccEMvDYT.s:584    .text.sd_lld_stop:00000008 .LBB40
     /tmp/ccEMvDYT.s:599    .text.sd_lld_stop:00000014 .LBE40
     /tmp/ccEMvDYT.s:420    .text.sd_lld_start:00000000 .LFB153
     /tmp/ccEMvDYT.s:560    .text.sd_lld_start:00000076 .LFE153
     /tmp/ccEMvDYT.s:3323   .debug_loc:00000004 .LLST12
     /tmp/ccEMvDYT.s:3318   .debug_loc:00000000 .LVUS12
     /tmp/ccEMvDYT.s:3351   .debug_loc:00000032 .LLST13
     /tmp/ccEMvDYT.s:3344   .debug_loc:0000002c .LVUS13
     /tmp/ccEMvDYT.s:457    .text.sd_lld_start:00000016 .LBI34
     /tmp/ccEMvDYT.s:3384   .debug_loc:0000006c .LLST14
     /tmp/ccEMvDYT.s:3381   .debug_loc:0000006a .LVUS14
     /tmp/ccEMvDYT.s:3401   .debug_loc:00000088 .LLST15
     /tmp/ccEMvDYT.s:3396   .debug_loc:00000084 .LVUS15
     /tmp/ccEMvDYT.s:396    .text.sd_lld_init:00000000 .LFB152
     /tmp/ccEMvDYT.s:413    .text.sd_lld_init:00000010 .LFE152
     /tmp/ccEMvDYT.s:411    .text.sd_lld_init:00000010 .LVL18
     /tmp/ccEMvDYT.s:234    .text.__vector_19:00000000 .LFB151
     /tmp/ccEMvDYT.s:390    .text.__vector_19:0000008a .LFE151
     /tmp/ccEMvDYT.s:3413   .debug_loc:000000a7 .LLST10
     /tmp/ccEMvDYT.s:3523   .debug_loc:00000190 .LLST11
     /tmp/ccEMvDYT.s:3518   .debug_loc:0000018c .LVUS11
     /tmp/ccEMvDYT.s:321    .text.__vector_19:00000034 .LVL12
     /tmp/ccEMvDYT.s:336    .text.__vector_19:00000044 .LVL13
     /tmp/ccEMvDYT.s:377    .text.__vector_19:00000080 .LVL16
     /tmp/ccEMvDYT.s:384    .text.__vector_19:00000088 .LVL17
     /tmp/ccEMvDYT.s:41     .text.__vector_18:00000000 .LFB150
     /tmp/ccEMvDYT.s:228    .text.__vector_18:00000088 .LFE150
     /tmp/ccEMvDYT.s:3544   .debug_loc:000001b8 .LLST1
     /tmp/ccEMvDYT.s:3642   .debug_loc:00000287 .LLST2
     /tmp/ccEMvDYT.s:3637   .debug_loc:00000283 .LVUS2
     /tmp/ccEMvDYT.s:168    .text.__vector_18:0000006e .LBI28
     /tmp/ccEMvDYT.s:167    .text.__vector_18:0000006e .LBB28
     /tmp/ccEMvDYT.s:219    .text.__vector_18:00000082 .LBE28
     /tmp/ccEMvDYT.s:3656   .debug_loc:000002a7 .LLST3
     /tmp/ccEMvDYT.s:3653   .debug_loc:000002a5 .LVUS3
     /tmp/ccEMvDYT.s:3668   .debug_loc:000002be .LLST4
     /tmp/ccEMvDYT.s:3663   .debug_loc:000002ba .LVUS4
     /tmp/ccEMvDYT.s:3685   .debug_loc:000002e1 .LLST5
     /tmp/ccEMvDYT.s:3680   .debug_loc:000002dd .LVUS5
     /tmp/ccEMvDYT.s:3703   .debug_loc:00000305 .LLST6
     /tmp/ccEMvDYT.s:3698   .debug_loc:00000301 .LVUS6
     /tmp/ccEMvDYT.s:3721   .debug_loc:00000329 .LLST7
     /tmp/ccEMvDYT.s:3716   .debug_loc:00000325 .LVUS7
     /tmp/ccEMvDYT.s:198    .text.__vector_18:00000078 .LBI30
     /tmp/ccEMvDYT.s:197    .text.__vector_18:00000078 .LBB30
     /tmp/ccEMvDYT.s:211    .text.__vector_18:00000080 .LBE30
     /tmp/ccEMvDYT.s:3737   .debug_loc:0000034b .LLST8
     /tmp/ccEMvDYT.s:3734   .debug_loc:00000349 .LVUS8
     /tmp/ccEMvDYT.s:3752   .debug_loc:00000365 .LLST9
     /tmp/ccEMvDYT.s:3749   .debug_loc:00000363 .LVUS9
     /tmp/ccEMvDYT.s:208    .text.__vector_18:00000080 .LVL10
     /tmp/ccEMvDYT.s:132    .text.__vector_18:00000040 .LVL4
     /tmp/ccEMvDYT.s:140    .text.__vector_18:00000048 .LVL5
     /tmp/ccEMvDYT.s:222    .text.__vector_18:00000086 .LVL11
     /tmp/ccEMvDYT.s:15     .text.notify1:00000000 .LFB147
     /tmp/ccEMvDYT.s:35     .text.notify1:0000000c .LFE147
     /tmp/ccEMvDYT.s:3764   .debug_loc:0000037c .LLST0
     /tmp/ccEMvDYT.s:3759   .debug_loc:00000378 .LVUS0
     /tmp/ccEMvDYT.s:419    .text.sd_lld_start:00000000 .LVL19
     /tmp/ccEMvDYT.s:438    .text.sd_lld_start:0000000c .LVL20
     /tmp/ccEMvDYT.s:441    .text.sd_lld_start:0000000e .LVL21
     /tmp/ccEMvDYT.s:446    .text.sd_lld_start:00000010 .LVL22
     /tmp/ccEMvDYT.s:495    .text.sd_lld_start:00000034 .LVL27
     /tmp/ccEMvDYT.s:482    .text.sd_lld_start:0000002e .LVL25
     /tmp/ccEMvDYT.s:486    .text.sd_lld_start:00000032 .LVL26
     /tmp/ccEMvDYT.s:541    .text.sd_lld_start:00000068 .LVL28
     /tmp/ccEMvDYT.s:544    .text.sd_lld_start:0000006a .LVL29
     /tmp/ccEMvDYT.s:238    .text.__vector_19:00000002 .LCFI14
     /tmp/ccEMvDYT.s:242    .text.__vector_19:00000004 .LCFI15
     /tmp/ccEMvDYT.s:249    .text.__vector_19:0000000c .LCFI16
     /tmp/ccEMvDYT.s:253    .text.__vector_19:0000000e .LCFI17
     /tmp/ccEMvDYT.s:257    .text.__vector_19:00000010 .LCFI18
     /tmp/ccEMvDYT.s:261    .text.__vector_19:00000012 .LCFI19
     /tmp/ccEMvDYT.s:265    .text.__vector_19:00000014 .LCFI20
     /tmp/ccEMvDYT.s:269    .text.__vector_19:00000016 .LCFI21
     /tmp/ccEMvDYT.s:273    .text.__vector_19:00000018 .LCFI22
     /tmp/ccEMvDYT.s:277    .text.__vector_19:0000001a .LCFI23
     /tmp/ccEMvDYT.s:281    .text.__vector_19:0000001c .LCFI24
     /tmp/ccEMvDYT.s:285    .text.__vector_19:0000001e .LCFI25
     /tmp/ccEMvDYT.s:289    .text.__vector_19:00000020 .LCFI26
     /tmp/ccEMvDYT.s:293    .text.__vector_19:00000022 .LCFI27
     /tmp/ccEMvDYT.s:297    .text.__vector_19:00000024 .LCFI28
     /tmp/ccEMvDYT.s:301    .text.__vector_19:00000026 .LCFI29
     /tmp/ccEMvDYT.s:362    .text.__vector_19:0000006e .LVL14
     /tmp/ccEMvDYT.s:367    .text.__vector_19:00000072 .LVL15
     /tmp/ccEMvDYT.s:45     .text.__vector_18:00000002 .LCFI0
     /tmp/ccEMvDYT.s:49     .text.__vector_18:00000004 .LCFI1
     /tmp/ccEMvDYT.s:56     .text.__vector_18:0000000c .LCFI2
     /tmp/ccEMvDYT.s:60     .text.__vector_18:0000000e .LCFI3
     /tmp/ccEMvDYT.s:64     .text.__vector_18:00000010 .LCFI4
     /tmp/ccEMvDYT.s:68     .text.__vector_18:00000012 .LCFI5
     /tmp/ccEMvDYT.s:72     .text.__vector_18:00000014 .LCFI6
     /tmp/ccEMvDYT.s:76     .text.__vector_18:00000016 .LCFI7
     /tmp/ccEMvDYT.s:80     .text.__vector_18:00000018 .LCFI8
     /tmp/ccEMvDYT.s:84     .text.__vector_18:0000001a .LCFI9
     /tmp/ccEMvDYT.s:88     .text.__vector_18:0000001c .LCFI10
     /tmp/ccEMvDYT.s:92     .text.__vector_18:0000001e .LCFI11
     /tmp/ccEMvDYT.s:96     .text.__vector_18:00000020 .LCFI12
     /tmp/ccEMvDYT.s:100    .text.__vector_18:00000022 .LCFI13
     /tmp/ccEMvDYT.s:117    .text.__vector_18:0000002c .LVL2
     /tmp/ccEMvDYT.s:124    .text.__vector_18:00000034 .LVL3
     /tmp/ccEMvDYT.s:164    .text.__vector_18:0000006e .LVL6
     /tmp/ccEMvDYT.s:205    .text.__vector_18:0000007c .LVL9
     /tmp/ccEMvDYT.s:186    .text.__vector_18:00000074 .LVL7
     /tmp/ccEMvDYT.s:193    .text.__vector_18:00000078 .LVL8
     /tmp/ccEMvDYT.s:14     .text.notify1:00000000 .LVL0
     /tmp/ccEMvDYT.s:27     .text.notify1:00000006 .LVL1
     /tmp/ccEMvDYT.s:623    .debug_info:00000000 .Ldebug_info0
     /tmp/ccEMvDYT.s:456    .text.sd_lld_start:00000016 .LBB34
     /tmp/ccEMvDYT.s:489    .text.sd_lld_start:00000032 .LBE34
     /tmp/ccEMvDYT.s:491    .text.sd_lld_start:00000032 .LBB38
     /tmp/ccEMvDYT.s:499    .text.sd_lld_start:00000034 .LBE38
     /tmp/ccEMvDYT.s:501    .text.sd_lld_start:00000034 .LBB39
     /tmp/ccEMvDYT.s:558    .text.sd_lld_start:00000076 .LBE39

UNDEFINED SYMBOLS
__avr_in_isr
sdIncomingDataI
chSchIsPreemptionRequired
chEvtBroadcastFlagsI
chSchDoPreemption
sdRequestDataI
sdObjectInit
__do_clear_bss
